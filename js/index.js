!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t){function e(t,e){return"https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld="+t+"|"+e+"|000000"}function n(){try{console.log("Updating ractive from textarea"),f.set(JSON.parse(h.value))}catch(t){console.error("Error reading database",t)}}function r(){if(!d&&!l){var t=JSON.stringify(f.get(),null,2);t!==h.value&&(console.log("Updating textarea from ractive..."),h.value=t,i())}}function i(){console.log("Saving textarea to localstorage..."),window.localStorage.setItem("map-database",h.value),h.value!==window.localStorage.getItem("map-database")&&console.error("JSON MISMATCH:",{database:h.value,localstorage:window.localStorage.getItem("map-database")}),o()}function o(){function t(t,n,r){if(g[t.formatted_address])return g[t.formatted_address];{var i=g[t.formatted_address]=new s.maps.LatLng(t.latitude,t.longitude);new s.maps.Marker({map:p,position:i,icon:e(n,r)})}return i}if(p&&s){var n=new s.maps.LatLngBounds;f.get("destinations").forEach(function(e,n){e.formatted_address&&t(e,n+1,"be80ff")}),f.get("origins").forEach(function(e,r){e.formatted_address&&n.extend(t(e,r+1,"4bffa9"))}),p.fitBounds(n)}}function a(){var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.googleapis.com/maps/api/js?v=3.15&sensor=false&callback=initializeGMaps",document.body.appendChild(t)}var s,u=t("ractive"),c=u.extend(t("./lib/ui.ract")),h=document.getElementById("database");console.log("Getting database from localstorage"),h.value=window.localStorage.getItem("map-database"),console.log("databaseDom.value",{value:h.value});var f=new c({el:"ui",debug:!0,data:{destinations:[],origins:[],calculations:{},showDriving:!0,showWalking:!0,showBiking:!0,showTransit:!0}}),d=!1,l=!1;h.addEventListener("change",function(){d=!0,i(),n(),d=!1},!1),h.addEventListener("focus",function(){l=!0},!1),h.addEventListener("blur",function(){l=!1},!1),setInterval(function(){r()},1e3);var p;n();var g={};window.initializeGMaps=function(){s=window.google,window.geocoder=new s.maps.Geocoder,window.distanceMatrix=new s.maps.DistanceMatrixService,window.directionsService=new s.maps.DirectionsService,p=new s.maps.Map(document.getElementById("map-canvas"),{center:new s.maps.LatLng(55.53,9.4),zoom:10}),o()},window.onload=a},{"./lib/ui.ract":2,ractive:3}],2:[function(t,e){function n(t,e,n,i){if("transit"===n)return r(t,e,i);for(var o=[],a=0;a<e.length&&o.length<25;a++){var s=e[a];if(s[{walk:"walking",bike:"biking",drive:"driving",transit:"transiting"}[n]]&&s.formatted_address){s.distances||(s.distances={});var u=s.distances[t.formatted_address];u||(u=s.distances[t.formatted_address]={}),u[n]||(u.loading=u.loading?u.loading+1:1,o.push(s))}}if(o.length){i();var c=o.map(function(t){return new google.maps.LatLng(t.latitude,t.longitude)});console.log("distance matrix ["+n+"]",c),window.distanceMatrix.getDistanceMatrix({origins:[new google.maps.LatLng(t.latitude,t.longitude)],destinations:c,travelMode:{walk:google.maps.TravelMode.WALKING,drive:google.maps.TravelMode.DRIVING,bike:google.maps.TravelMode.BICYCLING,transit:google.maps.TravelMode.TRANSIT}[n],unitSystem:google.maps.UnitSystem.IMPERIAL,durationInTraffic:!1,avoidHighways:!1,avoidTolls:!1},function(e,r){if(r!==google.maps.DistanceMatrixStatus.OK)alert("Error was: "+r);else{for(var a=e.originAddresses,s=0;s<a.length;s++)for(var u=e.rows[s].elements,c=0;c<u.length;c++){var h=o[c].distances[t.formatted_address];h.loading&&h.loading--,h[n]=u[c]}i()}})}}function r(t,e,n){for(var i=0;i<e.length;i++){var o=e[i];if(o.transiting&&o.formatted_address){o.distances||(o.distances={});var a=o.distances[t.formatted_address];if(a||(a=o.distances[t.formatted_address]={}),!a.transit){a.loading?a.loading++:a.loading=1,n();var s={origin:new google.maps.LatLng(t.latitude,t.longitude),destination:new google.maps.LatLng(o.latitude,o.longitude),travelMode:google.maps.TravelMode.TRANSIT,transitOptions:{arrivalTime:new Date(2014,2,3,9,15,0,0)}};console.log("public transit from",t.formatted_address,"to",o.formatted_address,s),window.directionsService.route(s,function(i,o){a.loading--,o!==google.maps.DistanceMatrixStatus.OK?alert("Error was: "+o+"\n\nClick Compute to try again"):(a.transit={duration:i.routes[0].legs[0].duration,distance:i.routes[0].legs[0].distance},console.log("transit = ",a.transit),setTimeout(function(){r(t,e,n)},5e3)),n()});break}}}}var i=e;i.exports={data:{timeClass:function(t,e){return t.value<300*e?"fast":t.value<600*e?"moderate":t.value<900*e?"ok":t.value<1200*e?"slow":"bad"},shortenTime:function(t){return t.replace(/ hours?/,"h").replace(/ mins?/,"m")},directionsLink:function(t,e,n){return"https://maps.google.com/maps?t=m&saddr="+encodeURIComponent(t.formatted_address)+"&daddr="+encodeURIComponent(e.formatted_address)+"&dirflg="+{walk:"w",bike:"b",transit:"r",drive:"d"}[n]}},init:function(){var t=this;this.on("add-destination",function(){var t=this.get("destinations");t.push({name:"",address:"",driving:!0,walking:!0,biking:!0,transit:!0}),this.update()}),this.on("add-origin",function(){var t=this.get("origins");t.push({name:"",address:""}),this.update()}),this.on("compute",function(e,r){function i(){t.update()}var o=this.get("destinations");n(r,o,"walk",i),n(r,o,"bike",i),n(r,o,"drive",i),n(r,o,"transit",i)}),this.on("change-address",function(e,n){n&&n.address&&n.address!==n.formatted_address&&(console.log("Updating location:",n),window.geocoder.geocode({address:n.address},function(e,r){if(r===google.maps.GeocoderStatus.OK){console.log("results",e);var i=e[0];n.address=n.formatted_address=i.formatted_address,n.latitude=i.geometry.location.lat(),n.longitude=i.geometry.location.lng(),n.name||(n.name=n.address.replace(/^([\S]+\s+[\S]+).*$/,"$1")),t.update()}else alert("Geocode was not successful for the following reason: "+r)})),n&&!n.address&&(delete n.latitude,delete n.longitude,delete n.formatted_address)})}},i.exports.template=[{t:7,e:"div",a:{id:"top"},f:[{t:7,e:"section",a:{id:"map"},f:[{t:7,e:"div",a:{id:"map-canvas"}}]},"\n\n    ",{t:7,e:"section",a:{id:"input"},f:[{t:7,e:"section",a:{id:"destinations"},f:[{t:7,e:"h1",f:["Destinations"]},"\n",{t:4,r:"destinations",i:"d",f:["                ",{t:7,e:"div",f:[{t:7,e:"span",a:{"class":"id"},f:[{t:2,x:{r:["d"],s:"${0}+1"}}]},"\n                    ",{t:7,e:"span",a:{"class":"print-only"},f:[{t:7,e:"b",f:[{t:2,r:"name"}]}]},"\n                    ",{t:7,e:"label",a:{"class":"name"},f:[{t:7,e:"input",a:{placeholder:"Name...",value:[{t:2,r:"name"}]}}]},"\n                    ",{t:7,e:"label",a:{"class":"address"},f:[{t:7,e:"input",a:{placeholder:"Address...",value:[{t:2,r:"address"}]},v:{change:{n:"change-address",d:[{t:2,r:"."}]}}}]},"\n                    ",{t:7,e:"label",a:{"class":"transit"},f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:".driving"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/car.svg"}}]},"\n                    ",{t:7,e:"label",a:{"class":"transit"},f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:".walking"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/walk.svg"}}]},"\n                    ",{t:7,e:"label",a:{"class":"transit"},f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:".biking"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/bike.svg"}}]},"\n                    ",{t:7,e:"label",a:{"class":"transit"},f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:".transiting"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/transit.svg"}}]}]},"\n"]},"            ",{t:7,e:"p",f:[{t:7,e:"button",v:{click:"add-destination"},f:["Add Destination"]}]}]},"\n        ",{t:7,e:"section",a:{id:"origins"},f:[{t:7,e:"h1",f:["Origins"]},"\n",{t:4,r:"origins",i:"o",f:["            ",{t:7,e:"div",a:{"class":"origin"},f:[{t:7,e:"span",a:{"class":"id"},f:[{t:2,x:{r:["o"],s:"${0}+1"}}]},"\n                ",{t:7,e:"span",a:{"class":"print-only"},f:[{t:7,e:"b",f:[{t:2,r:"address"}]}]},"\n                ",{t:7,e:"label",a:{"class":"name"},f:[{t:7,e:"input",a:{placeholder:"Name...",value:[{t:2,r:"name"}]}}]},"\n                ",{t:7,e:"label",a:{"class":"address"},f:[{t:7,e:"input",a:{placeholder:"Address...",value:[{t:2,r:"address"}]},v:{change:{n:"change-address",d:[{t:2,r:"."}]}}}]}]},"\n"]},"            ",{t:7,e:"p",f:[{t:7,e:"button",v:{click:"add-origin"},f:["Add Origin"]}]}]}]}]},"\n\n",{t:7,e:"section",a:{id:"routes"},f:[{t:7,e:"h1",f:["Travel Time"]},"\n    ",{t:7,e:"p",f:["Show:\n        ",{t:7,e:"label",f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:"showDriving"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/car.svg"}}," Driving"]},"\n        ",{t:7,e:"label",f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:"showWalking"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/walk.svg"}}," Walking"]},"\n        ",{t:7,e:"label",f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:"showBiking"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/bike.svg"}}," Biking"]},"\n        ",{t:7,e:"label",f:[{t:7,e:"input",a:{type:"checkbox",checked:[{t:2,r:"showTransit"}]}},{t:7,e:"img",a:{"class":"icon",src:"img/transit.svg"}}," Transit"]}]},"\n",{t:4,r:"origins",i:"o",f:["    ",{t:7,e:"table",a:{"class":[{t:4,r:"showWalking",f:["show-walking"]}," ",{t:4,r:"showBiking",f:["show-biking"]}," ",{t:4,r:"showTransit",f:["show-transit"]}," ",{t:4,r:"showDriving",f:["show-driving"]}]},f:[{t:7,e:"tr",f:[{t:7,e:"th",f:[{t:4,r:"formatted_address",f:["                    ",{t:7,e:"a",a:{href:["http://maps.google.com/maps?q=",{t:2,r:"formatted_address"},"&layer=c&cbll=",{t:2,r:"latitude"},",",{t:2,r:"longitude"}],target:"_blank"},f:[{t:7,e:"img",a:{src:["http://maps.googleapis.com/maps/api/streetview?size=200x150&location=",{t:2,r:"formatted_address"},"&sensor=false"],width:"100",height:"75"}}]},"\n"]}]},"\n                ",{t:7,e:"th",a:{colspan:"4","class":"origin"},f:[{t:7,e:"span",a:{"class":"id"},f:[{t:2,r:"id"}]},"\n                    ",{t:7,e:"span",a:{"class":"print-only"},f:[{t:7,e:"b",f:[{t:2,r:"address"}]}]},"\n                    ",{t:7,e:"label",a:{"class":"name"},f:[{t:7,e:"input",a:{value:[{t:2,r:"name"}],placeholder:"Name..."}}]},{t:7,e:"br"},"\n                    ",{t:7,e:"label",a:{"class":"address"},f:[{t:7,e:"input",a:{value:[{t:2,r:"address"}],placeholder:"Address..."},v:{change:{n:"change-address",d:[{t:2,r:"."}]}}}]},{t:7,e:"br"},"\n                    ",{t:7,e:"button",v:{click:{n:"compute",d:[{t:2,r:"."}]}},f:["Compute"]},"\n                    ",{t:7,e:"a",a:{href:["http://www.trulia.com/validate.php?hsb=1&tst=h&locationId=&topnav_extra=&q=&search=",{t:2,r:"address"}],target:"_blank"},f:["Trulia"]},"\n                    ",{t:7,e:"a",a:{href:["http://maps.google.com/maps?q=",{t:2,r:"formatted_address"}],target:"_blank"},f:["Google"]},"\n                    ",{t:7,e:"a",a:{href:["http://www.walkscore.com/score/",{t:2,r:"formatted_address"}],target:"_blank"},f:["Walk Score"]}]}]},"\n        ",{t:7,e:"tr",f:[{t:7,e:"th"},"\n                ",{t:7,e:"th",f:[{t:4,r:"showDriving",f:[{t:7,e:"img",a:{"class":"icon",src:"img/car.svg"}}]}]},"\n                ",{t:7,e:"th",f:[{t:4,r:"showWalking",f:[{t:7,e:"img",a:{"class":"icon",src:"img/walk.svg"}}]}]},"\n                ",{t:7,e:"th",f:[{t:4,r:"showBiking",f:[{t:7,e:"img",a:{"class":"icon",src:"img/bike.svg"}}]}]},"\n                ",{t:7,e:"th",f:[{t:4,r:"showTransit",f:[{t:7,e:"img",a:{"class":"icon",src:"img/transit.svg"}}]}]}]},"\n",{t:4,r:"destinations",i:"d",f:["            ",{t:4,r:"formatted_address",f:["\n            ",{t:7,e:"tr",f:[{t:7,e:"th",f:[{t:2,kx:{r:"destinations",m:[{t:30,n:"d"},"name"]}}]},"\n                    ",{t:7,e:"td",a:{"class":[{t:4,r:"driving",f:["driving"]}]},f:[{t:4,r:"driving",f:["                            ",{t:7,e:"a",a:{href:[{t:2,x:{r:["directionsLink","o","origins","d","destinations"],s:'${0}(${2}[${1}],${4}[${3}],"drive")'}}],target:"_blank","class":"drive route"},f:[{t:4,kx:{r:"distances",m:[{r:["o","origins"],s:"${1}[${0}].formatted_address"}]},f:[{t:4,r:".drive",f:[{t:7,e:"span",a:{"class":[{t:2,x:{r:["timeClass","duration"],s:"${0}(${1},2)"}}],title:[{t:2,r:"distance.text"}]},f:[{t:2,x:{r:["shortenTime","duration.text"],s:"${0}(${1})"}}]}]},{t:4,n:1,r:".drive",f:["..."]}]}]},"\n"]}]},"\n                    ",{t:7,e:"td",a:{"class":[{t:4,r:"walking",f:["walking"]}]},f:[{t:4,r:"walking",f:["                            ",{t:7,e:"a",a:{href:[{t:2,x:{r:["directionsLink","o","origins","d","destinations"],s:'${0}(${2}[${1}],${4}[${3}],"walk")'}}],target:"_blank","class":"walk route"},f:[{t:4,kx:{r:"distances",m:[{r:["o","origins"],s:"${1}[${0}].formatted_address"}]},f:[{t:4,r:".walk",f:[{t:7,e:"span",a:{"class":[{t:2,x:{r:["timeClass","duration"],s:"${0}(${1},2)"}}],title:[{t:2,r:"distance.text"}]},f:[{t:2,x:{r:["shortenTime","duration.text"],s:"${0}(${1})"}}]}]},{t:4,n:1,r:".walk",f:["..."]}]}]},"\n"]}]},"\n                    ",{t:7,e:"td",a:{"class":[{t:4,r:"biking",f:["biking"]}]},f:[{t:4,r:"biking",f:["                            ",{t:7,e:"a",a:{href:[{t:2,x:{r:["directionsLink","o","origins","d","destinations"],s:'${0}(${2}[${1}],${4}[${3}],"bike")'}}],target:"_blank","class":"bike route"},f:[{t:4,kx:{r:"distances",m:[{r:["o","origins"],s:"${1}[${0}].formatted_address"}]},f:[{t:4,r:".bike",f:[{t:7,e:"span",a:{"class":[{t:2,x:{r:["timeClass","duration"],s:"${0}(${1},1)"}}],title:[{t:2,r:"distance.text"}]},f:[{t:2,x:{r:["shortenTime","duration.text"],s:"${0}(${1})"}}]}]},{t:4,n:1,r:".bike",f:["..."]}]}]},"\n"]}]},"\n                    ",{t:7,e:"td",a:{"class":[{t:4,r:"transiting",f:["transiting"]}]},f:[{t:4,r:"transiting",f:["                            ",{t:7,e:"a",a:{href:[{t:2,x:{r:["directionsLink","o","origins","d","destinations"],s:'${0}(${2}[${1}],${4}[${3}],"transit")'}}],target:"_blank","class":"transit route"},f:[{t:4,kx:{r:"distances",m:[{r:["o","origins"],s:"${1}[${0}].formatted_address"}]},f:[{t:4,r:".transit",f:[{t:7,e:"span",a:{"class":[{t:2,x:{r:["timeClass","duration"],s:"${0}(${1},2)"}}],title:[{t:2,r:"distance.text"}]},f:[{t:2,x:{r:["shortenTime","duration.text"],s:"${0}(${1})"}}]}]},{t:4,n:1,r:".transit",f:["..."]}]}]},"\n"]}]}]},"\n"]},""]}]},"\n"]},"    ",{t:7,e:"div",f:[{t:7,e:"button",v:{click:"add-origin"},f:["Add Origin..."]}]}]},"\n\n\n"]},{}],3:[function(t,e){!function(t){"use strict";var n=t.Ractive,r=void 0,i=function(){var t,e;return t={el:null,template:"",complete:null,preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,lazy:!1,debug:!1,noIntro:!1,transitionsEnabled:!0,magic:!1,noCssTransform:!1,adapt:[],sanitize:!1,stripComments:!0,isolated:!1,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],computed:null},e={keys:Object.keys(t),defaults:t}}(r),o=function(){return"undefined"!=typeof document?document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):void 0}(),a={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},s=function(t,e){return t?function(t,n){return n&&n!==e.html?document.createElementNS(n,t):document.createElement(t)}:function(t,n){if(n&&n!==e.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)}}(o,a),u="object"==typeof document,c=function(t){try{return Object.defineProperty({},"test",{value:0}),t&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Object.defineProperty}catch(e){return function(t,e,n){t[e]=n.value}}}(u),h=function(t,e,n){try{try{Object.defineProperties({},{test:{value:0}})}catch(r){throw r}return n&&Object.defineProperties(t("div"),{test:{value:0}}),Object.defineProperties}catch(r){return function(t,n){var r;for(r in n)n.hasOwnProperty(r)&&e(t,r,n[r])}}}(s,c,u),f=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},d=function(t){return function(e,n,r){var i;if("string"!=typeof n||!t(r))throw new Error("Bad arguments");if(i=+e.get(n)||0,!t(i))throw new Error("Cannot add to a non-numeric value");return e.set(n,i+r)}}(f),l=function(t){return function(e,n){return t(this,e,void 0===n?1:+n)}}(d),p=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},g=function(){function t(t){setTimeout(t,0)}function e(t,e){return function(){for(var n;n=t.shift();)n(e)}}function n(t,e,i,o){var a;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof r)e.then(i,o);else if(!e||"object"!=typeof e&&"function"!=typeof e)i(e);else{try{a=e.then}catch(s){return void o(s)}if("function"==typeof a){var u,c,h;c=function(e){u||(u=!0,n(t,e,i,o))},h=function(t){u||(u=!0,o(t))};try{a.call(e,c,h)}catch(s){if(!u)return o(s),void(u=!0)}}else i(e)}}var r,i={},o={},a={};return r=function(s){var u,c,h,f,d,l,p=[],g=[],v=i;return h=function(n){return function(r){v===i&&(u=r,v=n,c=e(v===o?p:g,u),t(c))}},f=h(o),d=h(a),s(f,d),l={then:function(e,o){var a=new r(function(r,s){var u=function(t,e,i){e.push("function"==typeof t?function(e){var i;try{i=t(e),n(a,i,r,s)}catch(o){s(o)}}:i)};u(e,p,r),u(o,g,s),v!==i&&t(c)});return a}},l["catch"]=function(t){return this.then(null,t)},l},r.all=function(t){return new r(function(e,n){var r,i,o,a=[];if(!t.length)return void e(a);for(o=function(i){t[i].then(function(t){a[i]=t,--r||e(a)},n)},r=i=t.length;i--;)o(i)})},r.resolve=function(t){return new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r}(),v=function(){var t=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(e){return(e||"").replace(t,".$1")}}(),m=["o","ms","moz","webkit"],y=function(t){return"undefined"!=typeof window?(function(t,e,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(t){var n,r,o;return n=Date.now(),r=Math.max(0,16-(n-e)),o=i(function(){t(n+r)},r),e=n+r,o})}}(t,0,window),window.requestAnimationFrame):void 0}(m),w=function(){return"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()}}(),b=[],x=function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},_=function(t,e,n){var r,i,o,a,s,u="/* Ractive.js component styles */\n",c={},h=[];if(e)return t.push(function(){r=t.runloop}),i=document.createElement("style"),i.type="text/css",o=document.getElementsByTagName("head")[0],s=!1,a=i.styleSheet,{add:function(t){t.css&&(c[t._guid]||(c[t._guid]=0,h.push(t.css),r.scheduleCssUpdate()),c[t._guid]+=1)},remove:function(t){t.css&&(c[t._guid]-=1,c[t._guid]||(n(h,t.css),r.scheduleCssUpdate()))},update:function(){var t;h.length?(t=u+h.join(" "),a?a.cssText=t:i.innerHTML=t,s||o.appendChild(i)):s&&o.removeChild(i)}}}(b,u,x),E=function(t,e){var n,r,i,o,a,s;for(n=[],s=t._rendering?t.fragment.docFrag:t.el,r=s.querySelectorAll('input[type="checkbox"][name="{{'+e+'}}"]'),o=r.length,a=0;o>a;a+=1)i=r[a],(i.hasAttribute("checked")||i.checked)&&n.push(i._ractive.value);return n},k=Object.prototype.hasOwnProperty,N=function(t){do if(t.context)return t.context;while(t=t.parent);return""},O=function(t,e,n,r){var i,o='Could not resolve reference - too many "../" prefixes';return t.push(function(){i=t.get}),function(t,a,s){var u,c,h,f,d,l,p,g,v;if(a=e(a),"."===a)return r(s);if("."===a.charAt(0)){if(u=r(s),c=u?u.split("."):[],"../"===a.substr(0,3)){for(;"../"===a.substr(0,3);){if(!c.length)throw new Error(o);c.pop(),a=a.substring(3)}return c.push(a),c.join(".")}return u?u+a:a.substring(1)}h=a.split("."),f=h.pop(),d=h.length?"."+h.join("."):"";do if(u=s.context,u&&(v=!0,l=u+d,p=i(t,l),(g=t._wrapped[l])&&(p=g.get()),p&&("object"==typeof p||"function"==typeof p)&&f in p))return u+"."+a;while(s=s.parent);return v||t._parent&&!t.isolated?n.call(t.data,h[0])?a:void 0!==i(t,a)?a:void 0:a}}(b,v,k,N),T=function(t){var e,n,r,i,o=[""];for(e=t.length;e--;)for(n=t[e],r=n.split(".");r.length>1;)r.pop(),i=r.join("."),o[i]!==!0&&(o.push(i),o[i]=!0);return o},A=function(){function t(t,n,r){var o;for(t._patternObservers.length&&i(t,n,n,r,!0),o=0;o<t._deps.length;o+=1)e(t,n,o,r)}function e(t,e,i,o){var a=t._deps[i];a&&(n(a[e]),o||r(t._depsMap[e],t,i))}function n(t){var e,n;if(t)for(n=t.length,e=0;n>e;e+=1)t[e].update()}function r(t,n,r,i){var o;if(t)for(o=t.length;o--;)e(n,t[o],r,i)}function i(t,e,n,r,a){var u,c,h,f,d,l,p,g;for(u=t._patternObservers.length;u--;)c=t._patternObservers[u],c.regex.test(n)&&c.update(n);r||(g=function(e){if(h=t._depsMap[e])for(u=h.length;u--;)f=h[u],d=s.exec(f)[0],l=n?n+"."+d:d,i(t,f,l)},a?(p=o(n),p.forEach(g)):g(e))}function o(t){var e,n,r,i,o,s;for(e=t.split("."),n=a(e.length),o=[],r=function(t,n){return t?"*":e[n]},i=n.length;i--;)s=n[i].map(r).join("."),o[s]||(o.push(s),o[s]=!0);return o}function a(t){var e,n,r,i,o,a="";if(!u[t]){for(r=[];a.length<t;)a+=1;for(e=parseInt(a,2),i=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;r[o]=Array.prototype.map.call(n,i)}u[t]=r}return u[t]}var s,u={};return s=/[^\.]+$/,t.multiple=function(t,n,r){var o,a,s;if(s=n.length,t._patternObservers.length)for(o=s;o--;)i(t,n[o],n[o],r,!0);for(o=0;o<t._deps.length;o+=1)if(t._deps[o])for(a=s;a--;)e(t,n[a],o,r)},t}(),S=function(t){var e,n,r,i;return e=function(t,e){var o=[];return o.detachQueue=[],o.remove=r,o.init=i,o._check=n,o._callback=t,o._previous=e,e&&e.push(o),o},n=function(){var t;if(this._ready&&!this.length){for(;t=this.detachQueue.pop();)t.detach();"function"==typeof this._callback&&this._callback(),this._previous&&this._previous.remove(this)}},r=function(e){t(this,e),this._check()},i=function(){this._ready=!0,this._check()},e}(x),R=function(t,e,n,r,i,o,a,s){function u(){var t,n,i,s,u;for(i=C.length;i--;)t=C[i],t._changes.length&&(n=o(t._changes),a.multiple(t,n,!0));for(c();g;){for(g=!1;t=N.pop();)t.update();for(;t=k.pop();)t.update().deferred=!1;for(;t=O.pop();)t.deferredUpdate();for(;t=A.pop();)d(t.root,t.keypath,r(t.root,t.keypath));for(;t=S.pop();)t.update()}for(m&&(m.focus(),m=null);t=_.pop();)t.update().deferred=!1;for(;t=y.pop();)t._sort();for(;t=w.pop();)t.init();for(;t=b.pop();)t.init();for(;t=x.pop();)t.update();for(;t=E.pop();)t.active=!1;for(;t=C.pop();)if(C[t._guid]=!1,t._changes.length){for(s={};u=t._changes.pop();)s[u]=f(t,u);t.fire("change",s)}l&&(e.update(),l=!1)}function c(){var t,e,n;if(R.length)for(t=R.splice(0,R.length);e=t.pop();)e.keypath||(n=i(e.root,e.ref,e.parentFragment),void 0!==n?e.resolve(n):R.push(e))}t.push(function(){f=t.get,d=t.set});var h,f,d,l,p,g=!1,v=!1,m=null,y=[],w=[],b=[],x=[],_=[],E=[],k=[],N=[],O=[],T={},A=[],S=[],R=[],C=[];return h={start:function(t,e){this.addInstance(t),v||(p=s(e,p))},end:function(){return v?void c():(v=!0,u(),v=!1,p.init(),void(p=p._previous))},trigger:function(){return v?void c():(v=!0,u(),void(v=!1))},focus:function(t){m=t},addInstance:function(t){t&&!C[t._guid]&&(C.push(t),C[C._guid]=!0)},addLiveQuery:function(t){y.push(t)},addDecorator:function(t){w.push(t)},addTransition:function(t){t._manager=p,p.push(t),b.push(t)},addObserver:function(t){x.push(t)},addAttribute:function(t){_.push(t)},addBinding:function(t){t.active=!0,E.push(t)},scheduleCssUpdate:function(){v?l=!0:e.update()},addEvaluator:function(t){g=!0,k.push(t)},addComputation:function(t){g=!0,N.push(t)},addSelectValue:function(t){g=!0,O.push(t)},addCheckbox:function(t){T[t.keypath]||(g=!0,A.push(t))},addRadio:function(t){g=!0,S.push(t)},addUnresolved:function(t){g=!0,R.push(t)},removeUnresolved:function(t){n(R,t)},detachWhenReady:function(t){p.detachQueue.push(t)}},t.runloop=h,h}(b,_,x,E,O,T,A,S),C=function(t,e,n){var r=[],i={tick:function(){var o,a,s;for(s=e(),n.start(),o=0;o<r.length;o+=1)a=r[o],a.tick(s)||r.splice(o--,1);n.end(),r.length?t(i.tick):i.running=!1},add:function(e){r.push(e),i.running||(i.running=!0,t(i.tick))},abort:function(t,e){for(var n,i=r.length;i--;)n=r[i],n.root===e&&n.keypath===t&&n.stop()}};return i}(y,w,R),L=function(){var t=Object.prototype.toString;return function(e){return"[object Array]"===t.call(e)}}(),I=function(t){return function(e){var n,r;if(!e||"object"!=typeof e)return e;if(t(e))return e.slice();n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}}(L),F={},M=function(t,e,n){switch(e){case"splice":return n;case"sort":case"reverse":return null;case"pop":return t.length?[-1]:null;case"push":return[t.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},P=function(t,e){var n,r,i,o;return e?(n=+(e[0]<0?t.length+e[0]:e[0]),r=Math.max(0,e.length-2),i=void 0!==e[1]?e[1]:t.length-n,i=Math.min(i,t.length-n),o=r-i,{start:n,balance:o,added:r,removed:i}):null},j={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40},D=function Qi(t,e,n){var r,i;if(n||(i=t._wrapped[e])&&i.teardown()!==!1&&(t._wrapped[e]=null),t._cache[e]=void 0,r=t._cacheMap[e])for(;r.length;)Qi(t,r.pop())},$=function(){var t=/^\s*[0-9]+\s*$/;return function(e){return t.test(e)?[]:{}}}(),U=function(t,e,n,r,i){function o(t,s,u,c){var h,f,d,l,p,g,v,m;e(t._cache[s],u)||(p=t._computations[s],g=t._wrapped[s],v=t._evaluators[s],p&&!p.setting&&p.set(u),g&&g.reset&&(m=g.reset(u)!==!1,m&&(u=g.get())),v&&(v.value=u),p||v||m||(h=s.split("."),f=h.pop(),d=h.join("."),g=t._wrapped[d],g&&g.set?g.set(f,u):(l=g?g.get():a(t,d),l||(l=n(f),o(t,d,l,!0)),l[f]=u)),r(t,s,m),c||(t._changes.push(s),i(t,s)))}var a;return t.push(function(){a=t.get}),t.set=o,o}(b,p,$,D,A),B=function(t,e,n,r){return function(i,o,a,s){var u,c,h,f,d,l,p,g,v,m;if(u=i.root,c=i.keypath,u._changes.push(c),"sort"===a||"reverse"===a)return void r(u,c,o);if(s){for(h=s.balance?o.length-Math.min(s.balance,0):s.added,d=s.start;h>d;d+=1)e(u,c+"."+d);if(f=function(e){e.keypath===c&&e.type===t.SECTION&&!e.inverted&&e.docFrag?e.splice(s):e.update()},u._deps.forEach(function(t){var e=t[c];e&&e.forEach(f)}),s.added&&s.removed)for(l=Math.max(s.added,s.removed),p=s.start,g=p+l,m=s.added===s.removed,d=p;g>d;d+=1)v=c+"."+d,n(u,v);m||(e(u,c+".length"),n(u,c+".length",!0))}}}(j,D,A,U),W=function(t,e,n,r,i){var o,a,s,u=[],c=["pop","push","reverse","shift","sort","splice","unshift"];return c.forEach(function(o){var a=function(){var e,a,s,u,c;for(e=n(this,o,Array.prototype.slice.call(arguments)),a=r(this,e),s=Array.prototype[o].apply(this,arguments),this._ractive.setting=!0,c=this._ractive.wrappers.length;c--;)u=this._ractive.wrappers[c],t.start(u.root),i(u,this,o,a),t.end();return this._ractive.setting=!1,s};e(u,o,{value:a})}),o={},o.__proto__?(a=function(t){t.__proto__=u},s=function(t){t.__proto__=Array.prototype}):(a=function(t){var n,r;for(n=c.length;n--;)r=c[n],e(t,r,{value:u[r],configurable:!0})},s=function(t){var e;for(e=c.length;e--;)delete t[c[e]]}),a.unpatch=s,a}(R,c,M,P,B),V=function(t,e,n){var r,i,o;return r={filter:function(t){return e(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new i(t,e,n)}},i=function(e,r,i){this.root=e,this.value=r,this.keypath=i,r._ractive||(t(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[e._guid]||(r._ractive.instances[e._guid]=0,r._ractive.instances.push(e)),r._ractive.instances[e._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var t,e,r,i,a;if(t=this.value,e=t._ractive,r=e.wrappers,i=e.instances,e.setting)return!1;if(a=r.indexOf(this),-1===a)throw new Error(o);if(r.splice(a,1),r.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(a=i.indexOf(this.root),-1===a)throw new Error(o);i.splice(a,1)}}else delete t._ractive,n.unpatch(this.value)}},o="Something went wrong in a rather interesting way",r}(c,L,W),q=function(t,e,n,r,i){function o(e,n,o){function a(e){var o,a;e.value=n,e.updating||(a=e.ractive,o=e.keypath,e.updating=!0,t.start(a),a._changes.push(o),r(a,o),i(a,o),t.end(),e.updating=!1)}var s,u,c,h,f,d;if(s=e.obj,u=e.prop,o&&!o.configurable){if("length"===u)return;throw new Error('Cannot use magic mode with property "'+u+'" - object is not configurable')}o&&(c=o.get,h=o.set),f=c||function(){return n},d=function(t){h&&h(t),n=c?c():t,d._ractiveWrappers.forEach(a)},d._ractiveWrappers=[e],Object.defineProperty(s,u,{get:f,set:d,enumerable:!0,configurable:!0})}var a,s;try{Object.defineProperty({},"test",{value:0})}catch(u){return!1}return a={filter:function(t,e,r){var i,o,a,s,u;return e?(i=e.split("."),o=i.pop(),a=i.join("."),(s=r._wrapped[a])&&!s.magic?!1:(u=r.get(a),n(u)&&/^[0-9]+$/.test(o)?!1:u&&("object"==typeof u||"function"==typeof u))):!1},wrap:function(t,e,n){return new s(t,e,n)}},s=function(t,e,n){var r,i,a,s;return this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,r=n.split("."),this.prop=r.pop(),i=r.join("."),this.obj=i?t.get(i):t.data,a=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),a&&a.set&&(s=a.set._ractiveWrappers)?void(-1===s.indexOf(this)&&s.push(this)):void o(this,e,a)},s.prototype={get:function(){return this.value},reset:function(t){this.updating||(this.updating=!0,this.obj[this.prop]=t,r(this.ractive,this.keypath),this.updating=!1)},set:function(t,n){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=e(t),this.updating=!1),this.obj[this.prop][t]=n)},teardown:function(){var t,e,n,r,i;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(r=e._ractiveWrappers,i=r.indexOf(this),-1!==i&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}},a}(R,$,L,D,A),z=function(t,e){if(!t)return!1;var n,r;return n={filter:function(n,r,i){return t.filter(n,r,i)&&e.filter(n)},wrap:function(t,e,n){return new r(t,e,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=t.wrap(n,r,i),this.arrayWrapper=e.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}},n}(q,V),G=function(t,e,n,r){function i(t,e){var n,r={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r}function o(t){var e;return a[t]||(e=t?t+".":"",a[t]=function(n,r){var o;return"string"==typeof n?(o={},o[e+n]=r,o):"object"==typeof n?e?i(n,t):n:void 0}),a[t]}var a={};return function(i,a,s,u){var c,h,f,d;for(c=i.adapt.length,h=0;c>h;h+=1){if(f=i.adapt[h],"string"==typeof f){if(!t[f])throw new Error('Missing adaptor "'+f+'"');f=i.adapt[h]=t[f]}if(f.filter(s,a,i))return d=i._wrapped[a]=f.wrap(i,s,a,o(a)),d.value=s,s}return u||(i.magic?r.filter(s,a,i)?i._wrapped[a]=r.wrap(i,s,a):n.filter(s,a,i)&&(i._wrapped[a]=n.wrap(i,s,a)):i.modifyArrays&&e.filter(s,a,i)&&(i._wrapped[a]=e.wrap(i,s,a))),s}}(F,V,q,z),Q=function(){function t(t,e){var n,r,i;for(n=e.split(".");n.length;)n.pop(),r=n.join("."),i=t._depsMap[r]||(t._depsMap[r]=[]),void 0===i[e]&&(i[e]=0,i[i.length]=e),i[e]+=1,e=r}return function(e){var n,r,i,o,a;i=e.root,o=e.keypath,a=e.priority,n=i._deps[a]||(i._deps[a]={}),r=n[o]||(n[o]=[]),r.push(e),e.registered=!0,o&&t(i,o)}}(),H=function(){function t(t,e){var n,r,i;
for(n=e.split(".");n.length;)n.pop(),r=n.join("."),i=t._depsMap[r],i[e]-=1,i[e]||(i.splice(i.indexOf(e),1),i[e]=void 0),e=r}return function(e){var n,r,i,o,a;if(i=e.root,o=e.keypath,a=e.priority,n=i._deps[a][o],r=n.indexOf(e),-1===r||!e.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");n.splice(r,1),e.registered=!1,o&&t(i,o)}}(),K=function(t,e,n,r,i,o){var a,s;t.push(function(){a=t.get,s=t.set});var u=function(t,e,n,r,o){this.root=t,this.keypath=e,this.priority=o,this.otherInstance=n,this.otherKeypath=r,i(this),this.value=a(this.root,this.keypath)};return u.prototype={update:function(){var t;this.updating||this.counterpart&&this.counterpart.updating||(t=a(this.root,this.keypath),n(t)&&t._ractive&&t._ractive.setting||r(t,this.value)||(this.updating=!0,e.addInstance(this.otherInstance),s(this.otherInstance,this.otherKeypath,t),this.value=t,this.updating=!1))},reassign:function(t){o(this),o(this.counterpart),this.keypath=t,this.counterpart.otherKeypath=t,i(this),i(this.counterpart)},teardown:function(){o(this)}},function(t,e,n,r){var i,o,a,s,c,h;i=n+"="+r,a=t.bindings,a[i]||(a[i]=!0,o=t.instance,s=t.parentFragment.priority,c=new u(e,n,o,r,s),a.push(c),o.twoway&&(h=new u(o,r,e,n,1),a.push(h),c.counterpart=h,h.counterpart=c))}}(b,R,L,p,Q,H),Z=function(t,e,n){function r(t,r,i,o,a){n(r,o,a,!0),e(r.component,t,i,o)}var i;return t.push(function(){i=t.get}),function(t,e){var n,o,a,s,u;if(n=t._parent,o=t.component.parentFragment,o.indexRefs&&void 0!==(u=o.indexRefs[e]))return t.component.indexRefBindings[e]=e,u;do if(o.context&&(a=o.context+"."+e,s=i(n,a),void 0!==s))return r(n,t,a,e,s),s;while(o=o.parent);return s=i(n,e),void 0!==s?(r(n,t,e,e,s),s):void 0}}(b,K,U),Y={FAILED_LOOKUP:!0},J=function(t,e,n,r,i,o){function a(t,e,n){var a,u,c,h,f=t._cache;return void 0===f[e]?((u=t._computations[e])?a=u.value:(c=t._wrapped[e])?a=c.value:e?a=(h=t._evaluators[e])?h.value:s(t,e):(r(t,"",t.data),a=t.data),f[e]=a):a=f[e],a===o&&(a=t._parent&&!t.isolated?i(t,e,n):void 0),n&&n.evaluateWrapped&&(c=t._wrapped[e])&&(a=c.get()),a}function s(t,i){var s,u,c,h,f,d,l,p;return s=i.split("."),u=s.pop(),c=s.join("."),h=a(t,c),(l=t._wrapped[c])&&(h=l.get()),null!==h&&void 0!==h?((f=t._cacheMap[c])?-1===f.indexOf(i)&&f.push(i):t._cacheMap[c]=[i],"object"!=typeof h||u in h?(p=!e.call(h,u),d=p?n(h[u]):h[u],d=r(t,i,d,!1),t._cache[i]=d,d):t._cache[i]=o):void 0}return t.get=a,a}(b,k,I,G,Z,Y),X=function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(){console.warn.apply(console,arguments)}:function(){}}(),te=function(){var t=Object.prototype.toString;return function(e){return e&&"[object Object]"===t.call(e)}}(),ee=function(t,e,n,r,i){var o,a,s;return t.push(function(){a=t.interpolate}),s=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,o={number:function(t,e){var n;return i(t)&&i(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var r,i,o,s;if(!n(t)||!n(e))return null;for(r=[],i=[],s=o=Math.min(t.length,e.length);s--;)i[s]=a(t[s],e[s]);for(s=o;s<t.length;s+=1)r[s]=t[s];for(s=o;s<e.length;s+=1)r[s]=e[s];return function(t){for(var e=o;e--;)r[e]=i[e](t);return r}},object:function(t,n){var i,o,s,u,c;if(!r(t)||!r(n))return null;i=[],u={},s={};for(c in t)e.call(t,c)&&(e.call(n,c)?(i.push(c),s[c]=a(t[c],n[c])):u[c]=t[c]);for(c in n)e.call(n,c)&&!e.call(t,c)&&(u[c]=n[c]);return o=i.length,function(t){for(var e,n=o;n--;)e=i[n],u[e]=s[e](t);return u}},cssLength:function(t,e){var n,r,i,o,a,u,c,h;return 0!==t&&"string"!=typeof t||0!==e&&"string"!=typeof e?null:(n=s.exec(t),r=s.exec(e),i=n?n[2]:"",o=r?r[2]:"",i&&o&&i!==o?null:(c=i||o,a=n?+n[1]:0,u=r?+r[1]:0,h=u-a,h?function(t){return a+t*h+c}:function(){return a+c}))}}}(b,k,L,te,f),ne=function(t,e,n){function r(t){return function(){return t}}var i=function(t,i,o,a){if(t===i)return r(i);if(a){if(o.interpolators[a])return o.interpolators[a](t,i)||r(i);e('Missing "'+a+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(t,i)||n.array(t,i)||n.object(t,i)||n.cssLength(t,i)||r(i)};return t.interpolate=i,i}(b,X,ee),re=function(t,e,n,r){var i=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return i.prototype={tick:function(){var n,i,o,a,s,u;return u=this.keypath,this.running?(a=Date.now(),n=a-this.startTime,n>=this.duration?(null!==u&&(e.start(this.root),r(this.root,u,this.to),e.end()),this.step&&this.step(1,this.to),this.complete(this.to),s=this.root._animations.indexOf(this),-1===s&&t("Animation was not found"),this.root._animations.splice(s,1),this.running=!1,!1):(i=this.easing?this.easing(n/this.duration):n/this.duration,null!==u&&(o=this.interpolator(i),e.start(this.root),r(this.root,u,o),e.end()),this.step&&this.step(i,o),!0)):!1},stop:function(){var e;this.running=!1,e=this.root._animations.indexOf(this),-1===e&&t("Animation was not found"),this.root._animations.splice(e,1)}},i}(X,R,ne,U),ie=function(t,e,n,r,i,o){function a(e,a,s,c){var h,f,d,l;return a&&(a=n(a)),null!==a&&(l=i(e,a)),r.abort(a,e),t(l,s)?(c.complete&&c.complete(c.to),u):(c.easing&&(h="function"==typeof c.easing?c.easing:e.easing[c.easing],"function"!=typeof h&&(h=null)),f=void 0===c.duration?400:c.duration,d=new o({keypath:a,from:l,to:s,root:e,duration:f,easing:h,interpolator:c.interpolator,step:c.step,complete:c.complete}),r.add(d),e._animations.push(d),d)}var s=function(){},u={stop:s};return function(t,n,r){var i,o,u,c,h,f,d,l,p,g,v,m,y,w;if(i=new e(function(t){o=t}),"object"==typeof t){r=n||{},f=r.easing,d=r.duration,h=[],l=r.step,p=r.complete,(l||p)&&(v={},r.step=null,r.complete=null,g=function(t){return function(e,n){v[t]=n}});for(u in t)t.hasOwnProperty(u)&&((l||p)&&(m=g(u),r={easing:f,duration:d},l&&(r.step=m)),r.complete=p?m:s,h.push(a(this,u,t[u],r)));return(l||p)&&(w={easing:f,duration:d},l&&(w.step=function(t){l(t,v)}),p&&i.then(function(t){p(t,v)}),w.complete=o,y=a(this,null,null,w),h.push(y)),{stop:function(){for(var t;t=h.pop();)t.stop();y&&y.stop()}}}return r=r||{},r.complete&&i.then(r.complete),r.complete=o,c=a(this,t,n,r),i.stop=function(){c.stop()},i}}(p,g,v,C,J,re),oe=function(){return this.fragment.detach()},ae=function(t){return this.el?this.fragment.find(t):null},se=function(t,e,n){var r,i,o,a,s,u,c;if(t){for(r=n("div"),i=["matches","matchesSelector"],c=function(t){return function(e,n){return e[t](n)}},s=i.length;s--;){if(o=i[s],r[o])return c(o);for(u=e.length;u--;)if(a=e[s]+o.substr(0,1).toUpperCase()+o.substring(1),r[a])return c(a)}return function(t,e){var n,r;for(n=(t.parentNode||t.document).querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1}}}(u,m,s),ue=function(t){return function(e,n){var r=this._isComponentQuery?!this.selector||e.name===this.selector:t(e.node,this.selector);return r?(this.push(e.node||e.instance),n||this._makeDirty(),!0):void 0}}(se),ce=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},he=function(){function t(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function e(e){var n,r;for(n=[e],r=t(e);r;)n.push(r),r=t(r);return n}return function(t,n){var r,i,o,a,s,u,c,h,f,d;for(r=e(t.component||t._ractive.proxy),i=e(n.component||n._ractive.proxy),o=r[r.length-1],a=i[i.length-1];o&&o===a;)r.pop(),i.pop(),s=o,o=r[r.length-1],a=i[i.length-1];if(o=o.component||o,a=a.component||a,f=o.parentFragment,d=a.parentFragment,f===d)return u=f.items.indexOf(o),c=d.items.indexOf(a),u-c||r.length-i.length;if(h=s.fragments)return u=h.indexOf(f),c=h.indexOf(d),u-c||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),fe=function(t){return function(e,n){var r;return e.compareDocumentPosition?(r=e.compareDocumentPosition(n),2&r?1:-1):t(e,n)}}(he),de=function(t,e){return function(){this.sort(this._isComponentQuery?e:t),this._dirty=!1}}(fe,he),le=function(t){return function(){this._dirty||(t.addLiveQuery(this),this._dirty=!0)}}(R),pe=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},ge=function(t,e,n,r,i,o){return function(a,s,u,c){var h=[];return t(h,{selector:{value:s},live:{value:u},_isComponentQuery:{value:c},_test:{value:e}}),u?(t(h,{cancel:{value:n},_root:{value:a},_sort:{value:r},_makeDirty:{value:i},_remove:{value:o},_dirty:{value:!1,writable:!0}}),h):h}}(h,ue,ce,de,le,pe),ve=function(t){return function(e,n){var r,i;return this.el?(n=n||{},r=this._liveQueries,(i=r[e])?n&&n.live?i:i.slice():(i=t(this,e,!!n.live,!1),i.live&&(r.push(e),r["_"+e]=i),this.fragment.findAll(e,i),i)):[]}}(ge),me=function(t){return function(e,n){var r,i;return n=n||{},r=this._liveComponentQueries,(i=r[e])?n&&n.live?i:i.slice():(i=t(this,e,!!n.live,!0),i.live&&(r.push(e),r["_"+e]=i),this.fragment.findAllComponents(e,i),i)}}(ge),ye=function(t){return this.fragment.findComponent(t)},we=function(t){var e,n,r,i=this._subs[t];if(i)for(e=Array.prototype.slice.call(arguments,1),n=0,r=i.length;r>n;n+=1)i[n].apply(this,e)},be=function(t,e,n,r){var i,o={};t.push(function(){i=t.get});var a=function(t,e){this.root=t,this.ref=e,this.parentFragment=o,t._unresolvedImplicitDependencies[e]=!0,t._unresolvedImplicitDependencies.push(this),n.addUnresolved(this)};return a.prototype={resolve:function(){var t=this.root;r(t,this.ref),t._unresolvedImplicitDependencies[this.ref]=!1,e(t._unresolvedImplicitDependencies,this)},teardown:function(){n.removeUnresolved(this)}},a}(b,x,R,A),xe=function(t,e,n){var r={isTopLevel:!0};return function(i){var o;return i=t(i),o=e(this,i,r),this._captured&&this._captured[i]!==!0&&(this._captured.push(i),this._captured[i]=!0,void 0===o&&this._unresolvedImplicitDependencies[i]!==!0&&new n(this,i)),o}}(v,J,be),_e=function(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null},Ee=function(t){return function(e,n){if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.fragment.pNode=this.el=e}}(_e),ke=function(t,e){var n,r,i,o;return n={},r=0,i=t.map(function(t,i){var a,s,u;s=r,u=e.length;do{if(a=e.indexOf(t,s),-1===a)return o=!0,-1;s=a+1}while(n[a]&&u>s);return a===r&&(r+=1),a!==i&&(o=!0),n[a]=!0,a}),i.unchanged=!o,i},Ne=function(t,e){return function(n,r,i,o){var a;n._changes.push(r),a=function(e){e.type===t.REFERENCE?e.update():e.keypath===r&&e.type===t.SECTION&&!e.inverted&&e.docFrag?e.merge(i):e.update()},n._deps.forEach(function(t){var e=t[r];e&&e.forEach(a)}),o||e(n,r+".length",!0)}}(j,A),Oe=function(t,e,n,r,i,o,a){function s(t){return JSON.stringify(t)}function u(t){if(t===!0)return s;if("string"==typeof t)return c[t]||(c[t]=function(e){return e[t]}),c[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var c={};return function(s,c,h){var f,d,l,p,g,v,m,y;if(f=this.get(s),!n(f)||!n(c))return this.set(s,c,h&&h.complete);if(g=f.length===c.length,h&&h.compare){p=u(h.compare);try{d=f.map(p),l=c.map(p)}catch(w){if(this.debug)throw w;e("Merge operation: comparison failed. Falling back to identity checking"),d=f,l=c}}else d=f,l=c;return v=o(d,l),m=new r(function(t){y=t}),t.start(this,y),i(this,s,c,!0),a(this,s,v,g),t.end(),h&&h.complete&&m.then(h.complete),m}}(R,X,L,g,U,ke,Ne),Te=function(t,e,n){var r=function(t,e,n,r){var i=this;this.root=t,this.keypath=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.proxy={update:function(){i.reallyUpdate()}},this.priority=0,this.context=r&&r.context?r.context:t};return r.prototype={init:function(t){t!==!1?this.update():this.value=n(this.root,this.keypath)},update:function(){return this.defer&&this.ready?void t.addObserver(this.proxy):void this.reallyUpdate()},reallyUpdate:function(){var t,r;if(t=this.value,r=n(this.root,this.keypath),this.value=r,!this.updating){if(this.updating=!0,!e(r,t)||!this.ready)try{this.callback.call(this.context,r,t,this.keypath)}catch(i){if(this.debug||this.root.debug)throw i}this.updating=!1}}},r}(R,p,J),Ae=function(t){return function(e,n){var r,i,o,a,s,u,c;for(r=n.split("."),a=[""],u=function(n){var r,i,o;r=e._wrapped[n]?e._wrapped[n].get():e.get(n);for(i in r)!r.hasOwnProperty(i)||"_ractive"===i&&t(r)||(o=n?n+"."+i:i,s.push(o))},c=function(t){return t+"."+i};i=r.shift();)"*"===i?(s=[],a.forEach(u),a=s):a[0]?a=a.map(c):a[0]=i;return o={},a.forEach(function(t){o[t]=e.get(t)}),o}}(L),Se=function(t,e,n,r){var i,o=/\*/;return i=function(t,e,n,r){this.root=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=e,this.regex=new RegExp("^"+e.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:t},i.prototype={init:function(t){var e,n;if(e=r(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(n);else this.values=e},update:function(e){var n;{if(!o.test(e))return this.defer&&this.ready?void t.addObserver(this.getProxy(e)):void this.reallyUpdate(e);n=r(this.root,e);for(e in n)n.hasOwnProperty(e)&&this.update(e)}},reallyUpdate:function(t){var r=n(this.root,t);if(this.updating)return void(this.values[t]=r);if(this.updating=!0,!e(r,this.values[t])||!this.ready){try{this.callback.call(this.context,r,this.values[t],t)}catch(i){if(this.debug||this.root.debug)throw i}this.values[t]=r}this.updating=!1},getProxy:function(t){var e=this;return this.proxies[t]||(this.proxies[t]={update:function(){e.reallyUpdate(t)}}),this.proxies[t]}},i}(R,p,J,Ae),Re=function(t,e,n,r,i){var o=/\*/,a={};return function(s,u,c,h){var f,d;return u=t(u),h=h||a,o.test(u)?(f=new i(s,u,c,h),s._patternObservers.push(f),d=!0):f=new r(s,u,c,h),e(f),f.init(h.init),f.ready=!0,{cancel:function(){var t;d&&(t=s._patternObservers.indexOf(f),-1!==t&&s._patternObservers.splice(t,1)),n(f)}}}}(v,Q,H,Te,Se),Ce=function(t,e){return function(n,r,i){var o,a,s,u;if(t(n)){i=r,a=n,o=[];for(n in a)a.hasOwnProperty(n)&&(r=a[n],o.push(this.observe(n,r,i)));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}if("function"==typeof n)return i=r,r=n,n="",e(this,n,r,i);if(s=n.split(" "),1===s.length)return e(this,n,r,i);for(o=[],u=s.length;u--;)n=s[u],n&&o.push(e(this,n,r,i));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}}(te,Re),Le=function(t,e){var n,r;if(!e)if(t)this._subs[t]=[];else for(t in this._subs)delete this._subs[t];n=this._subs[t],n&&(r=n.indexOf(e),-1!==r&&n.splice(r,1))},Ie=function(t,e){var n,r,i=this;if("object"==typeof t){n=[];for(r in t)t.hasOwnProperty(r)&&n.push(this.on(r,t[r]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return this._subs[t]?this._subs[t].push(e):this._subs[t]=[e],{cancel:function(){i.off(t,e)}}},Fe=function(){var t;try{Object.create(null),t=Object.create}catch(e){t=function(){var t=function(){};return function(e,n){var r;return null===e?{}:(t.prototype=e,r=new t,n&&Object.defineProperties(r,n),r)}}()}return t}(),Me=function(t,e){return function(n,r){var i,o,a,s,u;if(n.owner=r.owner,a=n.parent=n.owner.parentFragment,n.root=r.root,n.pNode=r.pNode,n.pElement=r.pElement,n.context=r.context,n.owner.type===t.SECTION&&(n.index=r.index),a&&(s=a.indexRefs)){n.indexRefs=e(null);for(u in s)n.indexRefs[u]=s[u]}for(n.priority=a?a.priority+1:1,r.indexRef&&(n.indexRefs||(n.indexRefs={}),n.indexRefs[r.indexRef]=r.index),n.items=[],i=r.descriptor?r.descriptor.length:0,o=0;i>o;o+=1)n.items[n.items.length]=n.createItem({parentFragment:n,pElement:r.pElement,descriptor:r.descriptor[o],index:o})}}(j,Fe),Pe=function(t,e){return t.substr(0,e.length+1)===e+"."},je=function(t){return function(e,n){return e===n||t(e,n)}}(Pe),De=function(t){return function(e,n,r){return e===n?r:t(e,n)?e.replace(n+".",r+"."):void 0}}(Pe),$e=function(t,e){return function(n,r,i,o){n[r]&&!t(n[r],o)&&(n[r]=e(n[r],i,o))}}(je,De),Ue=function(t){return function(e,n,r,i){t(this,"context",r,i),this.indexRefs&&void 0!==this.indexRefs[e]&&this.indexRefs[e]!==n&&(this.indexRefs[e]=n),this.items.forEach(function(t){t.reassign(e,n,r,i)})}}($e),Be=function(t,e){return{init:t,reassign:e}}(Me,Ue),We=function(){var t,e=this.node;return e&&(t=e.parentNode)?(t.removeChild(e),e):void 0},Ve=function(t,e){var n,r,i;return r=/</g,i=/>/g,n=function(e,n){this.type=t.TEXT,this.descriptor=e.descriptor,n&&(this.node=document.createTextNode(e.descriptor),n.appendChild(this.node))},n.prototype={detach:e,reassign:function(){},teardown:function(t){t&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(r,"&lt;").replace(i,"&gt;")}},n}(j,We),qe=function(t,e){return function(n){n.keypath?e(n):t.removeUnresolved(n)}}(R,H),ze=function(t){var e=function(e,n,r,i){this.root=e,this.ref=n,this.parentFragment=r,this.resolve=i,t.addUnresolved(this)};return e.prototype={teardown:function(){t.removeUnresolved(this)}},e}(R),Ge=function(t,e,n,r,i){function o(t,e,r){var i,o,a;if(!s.test(t.toString()))return n(t,"_nowrap",{value:!0}),t;if(!t["_"+e._guid]){n(t,"_"+e._guid,{value:function(){var n,r,i,a;if(n=e._captured,n||(e._captured=[]),r=t.apply(e,arguments),e._captured.length)for(i=o.length;i--;)a=o[i],a.updateSoftDependencies(e._captured);return e._captured=n,r},writable:!0});for(i in t)t.hasOwnProperty(i)&&(t["_"+e._guid][i]=t[i]);t["_"+e._guid+"_evaluators"]=[]}return o=t["_"+e._guid+"_evaluators"],a=o.indexOf(r),-1===a&&o.push(r),t["_"+e._guid]}var a,s;return s=/this/,a=function(e,n,i,a,s){var u;this.evaluator=i,this.keypath=n,this.root=e,this.argNum=a,this.type=t.REFERENCE,this.priority=s,u=e.get(n),"function"!=typeof u||u._nowrap||(u=o(u,e,i)),this.value=i.values[a]=u,r(this)},a.prototype={update:function(){var t=this.root.get(this.keypath);"function"!=typeof t||t._nowrap||(t=o(t,this.root,this.evaluator)),e(t,this.value)||(this.evaluator.values[this.argNum]=t,this.evaluator.bubble(),this.value=t)},teardown:function(){i(this)}},a}(j,p,c,Q,H),Qe=function(t,e,n){var r=function(t,n,r){this.root=t,this.keypath=n,this.priority=r.priority,this.evaluator=r,e(this)};return r.prototype={update:function(){var e=this.root.get(this.keypath);t(e,this.value)||(this.evaluator.bubble(),this.value=e)},teardown:function(){n(this)}},r}(p,Q,H),He=function(t,e,n,r,i,o,a,s){function u(t,e){var n,r;if(t=t.replace(/\$\{([0-9]+)\}/g,"_$1"),h[t])return h[t];for(r=[];e--;)r[e]="_"+e;return n=new Function(r.join(","),"return("+t+")"),h[t]=n,n}var c,h={};return c=function(t,e,n,r,i,o){var s=this;s.root=t,s.uniqueString=n,s.keypath=e,s.priority=o,s.fn=u(r,i.length),s.values=[],s.refs=[],i.forEach(function(e,n){e&&(e.indexRef?s.values[n]=e.value:s.refs.push(new a(t,e.keypath,s,n,o)))}),s.selfUpdating=s.refs.length<=1},c.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(t.addEvaluator(this),this.deferred=!0)},update:function(){var t;if(this.evaluating)return this;this.evaluating=!0;try{t=this.fn.apply(null,this.values)}catch(a){this.root.debug&&e('Error evaluating "'+this.uniqueString+'": '+a.message||a),t=void 0}return n(t,this.value)||(this.value=t,r(this.root,this.keypath),o(this.root,this.keypath,t,!0),i(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();r(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var t=this.refs.length;t--;)this.refs[t].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(t){var e,n,r;for(this.softRefs||(this.softRefs=[]),e=this.softRefs.length;e--;)r=this.softRefs[e],t[r.keypath]||(this.softRefs.splice(e,1),this.softRefs[r.keypath]=!1,r.teardown());for(e=t.length;e--;)n=t[e],this.softRefs[n]||(r=new s(this.root,n,this),this.softRefs.push(r),this.softRefs[n]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},c}(R,X,p,D,A,G,Ge,Qe),Ke=function(t,e,n,r,i){function o(t,e){return t.replace(/\$\{([0-9]+)\}/g,function(t,n){return e[n]?e[n].value||e[n].keypath:"undefined"})}function a(t){return"${"+t.replace(/[\.\[\]]/g,"-")+"}"}var s=function(r,i,o,a){var s,u,c,h=this;return s=r.root,this.root=s,this.callback=a,this.owner=r,this.str=o.s,this.args=c=[],this.unresolved=[],this.pending=0,u=i.indexRefs,o.r&&o.r.length?(o.r.forEach(function(r,o){var a,f,d;return u&&void 0!==(a=u[r])?void(c[o]={indexRef:r,value:a}):(f=e(s,r,i))?void(c[o]={keypath:f}):(c[o]=null,h.pending+=1,d=new n(s,r,i,function(e){h.resolve(o,e),t(h.unresolved,d)}),void h.unresolved.push(d))}),this.ready=!0,void this.bubble()):(this.resolved=this.ready=!0,void this.bubble())};return s.prototype={bubble:function(){this.ready&&(this.uniqueString=o(this.str,this.args),this.keypath=a(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},teardown:function(){for(var t;t=this.unresolved.pop();)t.teardown()},resolve:function(t,e){this.args[t]={keypath:e},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var t;this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():(t=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root._evaluators[this.keypath]=t,t.update())},reassign:function(t,e,n,r){var o;this.args.forEach(function(a){var s;a&&(a.keypath&&(s=i(a.keypath,n,r))?(a.keypath=s,o=!0):a.indexRef===t&&(a.value=e,o=!0))}),o&&this.bubble()}},s}(x,O,ze,He,De),Ze=function(t,e,n,r,i,o,a){var s=function(i,o,s){var c,h,f,d,l,p=this;return c=i.root,h=i.parentFragment,this.ref=o.r,this.root=i.root,this.mustache=i,this.callback=s,this.pending=0,this.unresolved=[],l=this.members=[],this.indexRefMembers=[],this.keypathObservers=[],this.expressionResolvers=[],o.m.forEach(function(o,s){var g,v,m,y,w,b;return"string"==typeof o?void(p.members[s]=o):o.t===t.REFERENCE?(g=o.n,v=h.indexRefs,v&&void 0!==(m=v[g])?(l[s]=m,void p.indexRefMembers.push({ref:g,index:s})):(d=!0,(f=n(c,g,h))?(y=new u(c,f,i.priority,p,s),void p.keypathObservers.push(y)):(l[s]=void 0,p.pending+=1,w=new r(c,g,h,function(t){p.resolve(s,t),e(p.unresolved,w)}),p.unresolved.push(w),null))):(d=!0,p.pending+=1,b=new a(p,h,o,function(t){p.resolve(s,t),e(p.unresolved,b)}),void p.unresolved.push(b))}),d?(this.ready=!0,void this.bubble()):(f=this.getKeypath(),void s(f))};s.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){this.ready&&!this.pending&&this.callback(this.getKeypath())},resolve:function(t,e){var n=new u(this.root,e,this.mustache.priority,this,t);n.update(),this.keypathObservers.push(n),this.resolved=!--this.pending,this.bubble()},teardown:function(){for(var t;t=this.unresolved.pop();)t.teardown()},reassign:function(t,e){var n,r,i;for(r=this.indexRefMembers.length;r--;)i=this.indexRefMembers[r],i.ref===t&&(n=!0,this.members[i.index]=e);n&&this.bubble()}};var u=function(t,e,n,r,o){this.root=t,this.keypath=e,this.priority=n,this.resolver=r,this.index=o,i(this),this.update()};return u.prototype={update:function(){var t=this.resolver;t.members[this.index]=this.root.get(this.keypath),t.bubble()},teardown:function(){o(this)}},s}(j,x,O,ze,Q,H,Ke),Ye=function(t,e,n,r){return function(i,o){function a(t){i.resolve(t)}function s(n){var r=e(i.root,n,i.parentFragment);void 0!==r?a(r):(i.ref=n,t.addUnresolved(i))}var u,c,h,f,d;f=o.parentFragment,d=o.descriptor,i.root=f.root,i.parentFragment=f,i.descriptor=o.descriptor,i.index=o.index||0,i.priority=f.priority,i.type=o.descriptor.t,(u=d.r)&&(c=f.indexRefs,c&&void 0!==(h=c[u])?(i.indexRef=u,i.value=h,i.render(i.value)):s(u)),o.descriptor.x&&(i.resolver=new r(i,f,o.descriptor.x,a)),o.descriptor.kx&&(i.resolver=new n(i,o.descriptor.kx,s)),i.descriptor.n&&!i.hasOwnProperty("value")&&i.render(void 0)}}(R,O,Ze,Ke),Je=function(t,e){var n={evaluateWrapped:!0};return function(){var r=e(this.root,this.keypath,n);t(r,this.value)||(this.render(r),this.value=r)}}(p,J),Xe=function(t,e,n){return function(t){var r;t!==this.keypath&&(this.registered&&(n(this),r=this.parentFragment&&this.parentFragment.owner&&this.parentFragment.owner.element?this.parentFragment.owner.element:this,r.reassign(null,null,this.keypath,t),t===this.keypath)||(this.keypath=t,e(this),this.update()))}}(j,Q,H),tn=function(t){return function(e,n,r,i){var o,a;if(this.resolver&&this.resolver.reassign(e,n,r,i),this.keypath?(o=t(this.keypath,r,i),o&&this.resolve(o)):void 0!==e&&this.indexRef===e&&(this.value=n,this.render(n)),this.fragments)for(a=this.fragments.length;a--;)this.fragments[a].reassign(e,n,r,i)}}(De),en=function(t,e,n,r){return{init:t,update:e,resolve:n,reassign:r}}(Ye,Je,Xe,tn),nn=function(t,e,n,r){var i,o,a;return o=/</g,a=/>/g,i=function(e,r){this.type=t.INTERPOLATOR,r&&(this.node=document.createTextNode(""),r.appendChild(this.node)),n.init(this,e)},i.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:r,teardown:function(t){t&&this.detach(),e(this)},render:function(t){this.node&&(this.node.data=void 0==t?"":t)},firstNode:function(){return this.node},toString:function(){var t=void 0!=this.value?""+this.value:"";return t.replace(o,"&lt;").replace(a,"&gt;")}},i}(j,qe,en,We),rn=function(t){var e,n,r,i,o,a,s,u,c=this;if(e=this.parentFragment,o=[],t.forEach(function(t,e){var r,i,a,s;return t===e?void(o[t]=c.fragments[e]):(void 0===n&&(n=e),-1===t?void c.fragments[e].teardown(!0):(r=c.fragments[e],i=t-e,a=c.keypath+"."+e,s=c.keypath+"."+t,r.reassign(c.descriptor.i,t,a,s),void(o[t]=r)))}),void 0===n&&(n=this.length),this.length=i=this.root.get(this.keypath).length,i!==n){for(a={descriptor:this.descriptor.f,root:this.root,pNode:e.pNode,owner:this},this.descriptor.i&&(a.indexRef=this.descriptor.i),r=n;i>r;r+=1)(s=o[r])?this.docFrag.appendChild(s.detach(!1)):(a.context=this.keypath+"."+r,a.index=r,s=this.createFragment(a)),this.fragments[r]=s;u=e.findNextNode(this),e.pNode.insertBefore(this.docFrag,u)}},on=function(t,e){function n(t,e,n){var r,i,o;if(i=e.length,i<t.length)for(o=t.fragments.splice(i,t.length-i);o.length;)o.pop().teardown(!0);else if(i>t.length)for(r=t.length;i>r;r+=1)n.context=t.keypath+"."+r,n.index=r,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments[r]=t.createFragment(n);t.length=i}function r(t,e,n){var r,i,o,a;for(o=t.hasKey||(t.hasKey={}),i=t.fragments.length;i--;)a=t.fragments[i],a.index in e||(t.fragments[i].teardown(!0),t.fragments.splice(i,1),o[a.index]=!1);for(r in e)o[r]||(n.context=t.keypath+"."+r,n.index=r,t.descriptor.i&&(n.indexRef=t.descriptor.i),t.fragments.push(t.createFragment(n)),o[r]=!0);t.length=t.fragments.length}function i(t,e){t.length||(e.context=t.keypath,e.index=0,t.fragments[0]=t.createFragment(e),t.length=1)}function o(e,n,r,i){var o,a,s,u;if(a=t(n)&&0===n.length,o=r?a||!n:n&&!a){if(e.length||(i.index=0,e.fragments[0]=e.createFragment(i),e.length=1),e.length>1)for(s=e.fragments.splice(1);u=s.pop();)u.teardown(!0)}else e.length&&(e.teardownFragments(!0),e.length=0)}return function(a,s){var u={descriptor:a.descriptor.f,root:a.root,pNode:a.parentFragment.pNode,pElement:a.parentFragment.pElement,owner:a};return a.descriptor.n?void o(a,s,!0,u):void(t(s)?n(a,s,u):e(s)||"function"==typeof s?a.descriptor.i?r(a,s,u):i(a,u):o(a,s,!1,u))}}(L,te),an=function(t,e){return function(n){var r,i;(i=this.root._wrapped[this.keypath])&&(n=i.get()),this.rendering||(this.rendering=!0,e(this,n),this.rendering=!1,(!this.docFrag||this.docFrag.childNodes.length)&&!this.initialising&&t&&(r=this.parentFragment.findNextNode(this),r&&r.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,r):this.parentFragment.pNode.appendChild(this.docFrag)))}}(u,on),sn=function(t,e,n,r){var i,o,a,s,u;for(a=t.descriptor.i,i=e;n>i;i+=1)o=t.fragments[i],s=t.keypath+"."+(i-r),u=t.keypath+"."+i,o.index=i,o.reassign(a,i,s,u)},un=function(t){function e(t){t.teardown(!0)}function n(t,e,n){var r,i,o;for(t.rendering=!0,r={descriptor:t.descriptor.f,root:t.root,pNode:t.parentFragment.pNode,pElement:t.pElement,owner:t,indexRef:t.descriptor.i},i=e;n>i;i+=1)r.context=t.keypath+"."+i,r.index=i,t.fragments[i]=t.createFragment(r);o=t.fragments[n]?t.fragments[n].firstNode():t.parentFragment.findNextNode(t),t.parentFragment.pNode.insertBefore(t.docFrag,o),t.rendering=!1}return function(r){var i,o,a,s,u,c=this;if(i=r.balance){if(o=r.start,c.length+=i,0>i)return c.fragments.splice(o,-i).forEach(e),void t(c,o,c.length,i);a=o+r.removed,s=o+r.added,u=[a,0],u.length+=i,c.fragments.splice.apply(c.fragments,u),t(c,s,c.length,i),n(c,a,s)}}}(sn),cn=function(t,e,n,r,i,o,a){var s,u;return a.push(function(){u=a.DomFragment}),s=function(n,r){this.type=t.SECTION,this.inverted=!!n.descriptor.n,this.pElement=n.pElement,this.fragments=[],this.length=0,r&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,e.init(this,n),r&&r.appendChild(this.docFrag),this.initialising=!1},s.prototype={update:e.update,resolve:e.resolve,reassign:e.reassign,splice:i,merge:n,detach:function(){var t,e;if(this.docFrag){for(e=this.fragments.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.fragments[t].detach());return this.docFrag}},teardown:function(t){this.teardownFragments(t),o(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(t){for(var e;e=this.fragments.shift();)e.teardown(t)},render:r,createFragment:function(t){var e=new u(t);return this.docFrag&&this.docFrag.appendChild(e.docFrag),e},toString:function(){var t,e,n;for(t="",e=0,n=this.length,e=0;n>e;e+=1)t+=this.fragments[e].toString();return t},find:function(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].find(t))return r;return null},findAll:function(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(t,e)},findComponent:function(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].findComponent(t))return r;return null},findAllComponents:function(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(t,e)}},s}(j,en,rn,an,un,qe,b),hn=function(t,e){function n(t){return o[t]||(o[t]=e(t))}var r,i,o={};try{e("table").innerHTML="foo"}catch(a){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(e,o,a,s){var u,c,h=[];if(e)for(r&&(c=i[o])?(u=n("DIV"),u.innerHTML=c[0]+e+c[1],u=u.querySelector(".x")):a===t.svg?(u=n("DIV"),u.innerHTML='<svg class="x">'+e+"</svg>",u=u.querySelector(".x")):(u=n(o),u.innerHTML=e);u.firstChild;)h.push(u.firstChild),s.appendChild(u.firstChild);return h}}(a,s),fn=function(t,e,n,r,i){var o=function(e,r){this.type=t.TRIPLE,r&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,n.init(this,e),r&&r.appendChild(this.docFrag),this.initialising=!1};return o.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:function(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}},teardown:function(t){t&&(this.detach(),this.docFrag=this.nodes=null),i(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)
},render:function(t){var e,n;if(this.nodes){for(;this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);if(!t)return void(this.nodes=[]);n=this.parentFragment.pNode,this.nodes=r(t,n.tagName,n.namespaceURI,this.docFrag),this.initialising||n.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),"SELECT"===n.tagName&&n._ractive&&n._ractive.binding&&n._ractive.binding.update()}},toString:function(){return void 0!=this.value?this.value:""},find:function(t){var n,r,i,o;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType){if(e(i,t))return i;if(o=i.querySelector(t))return o}return null},findAll:function(t,n){var r,i,o,a,s,u;for(i=this.nodes.length,r=0;i>r;r+=1)if(o=this.nodes[r],1===o.nodeType&&(e(o,t)&&n.push(o),a=o.querySelectorAll(t)))for(s=a.length,u=0;s>u;u+=1)n.push(a[u])}},o}(j,se,en,hn,qe),dn=function(t){return function(e,n){return e.a&&e.a.xmlns?e.a.xmlns:"svg"===e.e?t.svg:n.namespaceURI||t.html}}(a),ln=function(){var t,e,n,r;return t="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),e="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},r=n(t.concat(e)),function(t){var e=t.toLowerCase();return r[e]||e}}(),pn=function(t,e){return function(n,r){var i,o;if(i=r.indexOf(":"),-1===i||(o=r.substr(0,i),"xmlns"===o))n.name=n.element.namespace!==t.html?e(r):r,n.lcName=n.name.toLowerCase();else if(r=r.substring(i+1),n.name=e(r),n.lcName=n.name.toLowerCase(),n.namespace=t[o.toLowerCase()],!n.namespace)throw'Unknown namespace ("'+o+'")'}}(a,ln),gn=function(t){return function(e,n){var r,i=n.value||"";(r=n.pNode)&&(e.namespace?r.setAttributeNS(e.namespace,n.name,i):"style"===n.name&&r.style.setAttribute?r.style.setAttribute("cssText",i):"class"!==n.name||r.namespaceURI&&r.namespaceURI!==t.html?r.setAttribute(n.name,i):r.className=i,"id"===e.name&&(n.root.nodes[n.value]=r),"value"===e.name&&(r._ractive.value=n.value)),e.value=n.value||null}}(a),vn=function(t){var e={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;!n.pNode||n.namespace||r.pNode.namespaceURI&&r.pNode.namespaceURI!==t.html||(i=e[n.name]||n.name,void 0!==r.pNode[i]&&(n.propertyName=i),("boolean"==typeof r.pNode[i]||"value"===i)&&(n.useProperty=!0))}}(a),mn=function(t){return function(e){var n,r;return n=e.fragment.items,1===n.length&&(r=n[0],r.type===t.INTERPOLATOR&&(r.keypath||r.ref))?r:void 0}}(j),yn=function(t){return function(e,n){var r;if(!t(e)||!t(n))return!1;if(e.length!==n.length)return!1;for(r=e.length;r--;)if(e[r]!==n[r])return!1;return!0}}(L),wn=function(t,e,n,r,i,o){var a,s,u,c,h,f,d,l,p,g,v,m,y,w,b='For two-way binding to work, attribute value must be a single interpolator (e.g. value="{{foo}}")',x="You cannot set up two-way binding against an expression ";return a=function(){var t,n,r,i=this.pNode;return(t=this.interpolator)?t.keypath&&"${"===t.keypath.substr?(e(x+t.keypath),!1):(t.keypath||t.resolve(t.descriptor.r),this.keypath=t.keypath,(n=h(this))?(i._ractive.binding=this.element.binding=n,this.twoway=!0,r=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),r.push(n),!0):!1):(e(b),!1)},s=function(){t.start(this._ractive.root),this._ractive.binding.update(),t.end()},u={evaluateWrapped:!0},c=function(){var t=i(this._ractive.root,this._ractive.binding.keypath,u);this.value=void 0==t?"":t},h=function(t){var e=t.pNode;if("SELECT"===e.tagName)return e.multiple?new d(t,e):new l(t,e);if("checkbox"===e.type||"radio"===e.type){if("name"===t.propertyName){if("checkbox"===e.type)return new g(t,e);if("radio"===e.type)return new p(t,e)}return"checked"===t.propertyName?new v(t,e):null}if("value"!==t.lcName)throw new Error("Attempted to set up an illegal two-way binding. This error is unexpected - if you can, please file an issue at https://github.com/RactiveJS/Ractive, or contact @RactiveJS on Twitter. Thanks!");return"file"===e.type?new m(t,e):e.getAttribute("contenteditable")?new y(t,e):new w(t,e)},d=function(t,e){var n;f(this,t,e),e.addEventListener("change",s,!1),n=i(this.root,this.keypath),void 0===n&&this.update()},d.prototype={value:function(){var t,e,n,r,i,o;for(t=[],e=this.node.options,r=e.length,n=0;r>n;n+=1)i=e[n],i.selected&&(o=i._ractive?i._ractive.value:i.value,t.push(o));return t},update:function(){var e,r,i;return e=this.attr,r=e.value,i=this.value(),void 0!==r&&n(i,r)||(t.addBinding(e),e.value=i,o(this.root,this.keypath,i),t.trigger()),this},deferUpdate:function(){this.deferred!==!0&&(t.addAttribute(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",s,!1)}},l=function(t,e){var n;f(this,t,e),e.addEventListener("change",s,!1),n=i(this.root,this.keypath),void 0===n&&this.update()},l.prototype={value:function(){var t,e,n,r,i;for(t=this.node.options,n=t.length,e=0;n>e;e+=1)if(r=t[e],t[e].selected)return i=r._ractive?r._ractive.value:r.value},update:function(){var e=this.value();return t.addBinding(this.attr),this.attr.value=e,o(this.root,this.keypath,e),t.trigger(),this},deferUpdate:function(){this.deferred!==!0&&(t.addAttribute(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",s,!1)}},p=function(e,n){var r;this.radioName=!0,f(this,e,n),n.name="{{"+e.keypath+"}}",n.addEventListener("change",s,!1),n.attachEvent&&n.addEventListener("click",s,!1),r=i(this.root,this.keypath),void 0!==r?n.checked=r==n._ractive.value:t.addRadio(this)},p.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var e=this.node;e.checked&&(t.addBinding(this.attr),o(this.root,this.keypath,this.value()),t.trigger())},teardown:function(){this.node.removeEventListener("change",s,!1),this.node.removeEventListener("click",s,!1)}},g=function(e,n){var r,o;this.checkboxName=!0,f(this,e,n),n.name="{{"+this.keypath+"}}",n.addEventListener("change",s,!1),n.attachEvent&&n.addEventListener("click",s,!1),r=i(this.root,this.keypath),void 0!==r?(o=-1!==r.indexOf(n._ractive.value),n.checked=o):t.addCheckbox(this)},g.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,t.addBinding(this.attr),o(this.root,this.keypath,r(this.root,this.keypath)),t.trigger()},teardown:function(){this.node.removeEventListener("change",s,!1),this.node.removeEventListener("click",s,!1)}},v=function(t,e){f(this,t,e),e.addEventListener("change",s,!1),e.attachEvent&&e.addEventListener("click",s,!1)},v.prototype={value:function(){return this.node.checked},update:function(){t.addBinding(this.attr),o(this.root,this.keypath,this.value()),t.trigger()},teardown:function(){this.node.removeEventListener("change",s,!1),this.node.removeEventListener("click",s,!1)}},m=function(t,e){f(this,t,e),e.addEventListener("change",s,!1)},m.prototype={value:function(){return this.attr.pNode.files},update:function(){o(this.attr.root,this.attr.keypath,this.value()),t.trigger()},teardown:function(){this.node.removeEventListener("change",s,!1)}},y=function(t,e){f(this,t,e),e.addEventListener("change",s,!1),this.root.lazy||(e.addEventListener("input",s,!1),e.attachEvent&&e.addEventListener("keyup",s,!1))},y.prototype={update:function(){t.addBinding(this.attr),o(this.root,this.keypath,this.node.innerHTML),t.trigger()},teardown:function(){this.node.removeEventListener("change",s,!1),this.node.removeEventListener("input",s,!1),this.node.removeEventListener("keyup",s,!1)}},w=function(t,e){f(this,t,e),e.addEventListener("change",s,!1),this.root.lazy||(e.addEventListener("input",s,!1),e.attachEvent&&e.addEventListener("keyup",s,!1)),this.node.addEventListener("blur",c,!1)},w.prototype={value:function(){var t=this.attr.pNode.value;return+t+""===t&&-1===t.indexOf("e")&&(t=+t),t},update:function(){var e=this.attr,n=this.value();t.addBinding(e),o(e.root,e.keypath,n),t.trigger()},teardown:function(){this.node.removeEventListener("change",s,!1),this.node.removeEventListener("input",s,!1),this.node.removeEventListener("keyup",s,!1),this.node.removeEventListener("blur",c,!1)}},f=function(t,e,n){t.attr=e,t.node=n,t.root=e.root,t.keypath=e.keypath},a}(R,X,yn,E,J,U),bn=function(t,e,n){var r,i,o,a,s,u,c,h,f,d,l,p;return r=function(){var t;if(!this.ready)return this;if(t=this.pNode,"SELECT"===t.tagName&&"value"===this.lcName)return this.update=o,this.deferredUpdate=a,this.update();if(this.isFileInputValue)return this.update=i,this;if(this.twoway&&"name"===this.lcName){if("radio"===t.type)return this.update=c,this.update();if("checkbox"===t.type)return this.update=h,this.update()}return"style"===this.lcName&&t.style.setAttribute?(this.update=f,this.update()):"class"!==this.lcName||t.namespaceURI&&t.namespaceURI!==e.html?t.getAttribute("contenteditable")&&"value"===this.lcName?(this.update=l,this.update()):(this.update=p,this.update()):(this.update=d,this.update())},i=function(){return this},a=function(){this.deferredUpdate=this.pNode.multiple?u:s,this.deferredUpdate()},o=function(){return t.addSelectValue(this),this},s=function(){var t,e,n,r,i=this.fragment.getValue();for(this.value=this.pNode._ractive.value=i,t=this.pNode.options,r=t.length;r--;)if(e=t[r],n=e._ractive?e._ractive.value:e.value,n==i)return e.selected=!0,this;return this},u=function(){var t,e,r,i,o=this.fragment.getValue();for(n(o)||(o=[o]),t=this.pNode.options,e=t.length;e--;)r=t[e],i=r._ractive?r._ractive.value:r.value,r.selected=-1!==o.indexOf(i);return this.value=o,this},c=function(){var t,e;return t=this.pNode,e=this.fragment.getValue(),t.checked=e==t._ractive.value,this},h=function(){var t,e;return t=this.pNode,e=this.fragment.getValue(),n(e)?(t.checked=-1!==e.indexOf(t._ractive.value),this):(t.checked=e==t._ractive.value,this)},f=function(){var t,e;return t=this.pNode,e=this.fragment.getValue(),void 0===e&&(e=""),e!==this.value&&(t.style.setAttribute("cssText",e),this.value=e),this},d=function(){var t,e;return t=this.pNode,e=this.fragment.getValue(),void 0===e&&(e=""),e!==this.value&&(t.className=e,this.value=e),this},l=function(){var t,e;return t=this.pNode,e=this.fragment.getValue(),void 0===e&&(e=""),e!==this.value&&(this.active||(t.innerHTML=e),this.value=e),this},p=function(){var t,e,n;if(t=this.pNode,e=this.fragment.getValue(),this.isValueAttribute&&(t._ractive.value=e),void 0==e&&(e=""),e!==this.value){if(this.useProperty)return this.active||(t[this.propertyName]=e),"OPTION"===t.tagName&&t.selected&&(n=this.element.select.binding)&&n.update(),this.value=e,this;if(this.namespace)return t.setAttributeNS(this.namespace,this.name,e),this.value=e,this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[e]=t),t.setAttribute(this.name,e),this.value=e}return this},r}(R,a,L),xn=function(t){var e=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;return(r=n.matchPattern(e))?{t:t.NUMBER_LITERAL,v:r}:null}}(j),_n=function(t){return function(e){var n=e.remaining();return"true"===n.substr(0,4)?(e.pos+=4,{t:t.BOOLEAN_LITERAL,v:"true"}):"false"===n.substr(0,5)?(e.pos+=5,{t:t.BOOLEAN_LITERAL,v:"false"}):null}}(j),En=function(){var t,e,n;return t=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,e=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(r){return function(i){var o,a,s,u;for(o=i.pos,a='"',s=!1;!s;)u=i.matchPattern(t)||i.matchPattern(e)||i.matchString(r),u?a+='"'===u?'\\"':"\\'"===u?"'":u:(u=i.matchPattern(n),u?a+="\\u"+("000"+u.charCodeAt(1).toString(16)).slice(-4):s=!0);return a+='"',JSON.parse(a)}}}(),kn=function(t){return t('"')}(En),Nn=function(t){return t("'")}(En),On=function(t,e,n){return function(r){var i,o;return i=r.pos,r.matchString('"')?(o=n(r),r.matchString('"')?{t:t.STRING_LITERAL,v:o}:(r.pos=i,null)):r.matchString("'")?(o=e(r),r.matchString("'")?{t:t.STRING_LITERAL,v:o}:(r.pos=i,null)):null}}(j,kn,Nn),Tn={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},An=function(t,e,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var o;return(o=t(i))?r.test(o.v)?o.v:'"'+o.v.replace(/"/g,'\\"')+'"':(o=e(i))?o.v:(o=i.matchPattern(n.name))?o:void 0}}(On,xn,Tn),Sn=function(t,e){return function(n){var r,i,o;return r=n.pos,n.allowWhitespace(),i=e(n),null===i?(n.pos=r,null):(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),o=n.readExpression(),null===o?(n.pos=r,null):{t:t.KEY_VALUE_PAIR,k:i,v:o}):(n.pos=r,null))}}(j,An),Rn=function(t){return function e(n){var r,i,o,a;return r=n.pos,o=t(n),null===o?null:(i=[o],n.matchString(",")?(a=e(n),a?i.concat(a):(n.pos=r,null)):i)}}(Sn),Cn=function(t,e){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("{")?(i=e(n),n.allowWhitespace(),n.matchString("}")?{t:t.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(j,Rn),Ln=function Hi(t){function e(t){r.push(t)}var n,r,i,o;if(n=t.pos,t.allowWhitespace(),i=t.readExpression(),null===i)return null;if(r=[i],t.allowWhitespace(),t.matchString(",")){if(o=Hi(t),null===o)return t.pos=n,null;o.forEach(e)}return r},In=function(t,e){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("[")?(i=e(n),n.matchString("]")?{t:t.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(j,Ln),Fn=function(t,e,n,r,i){return function(o){var a=t(o)||e(o)||n(o)||r(o)||i(o);return a}}(xn,_n,On,Cn,In),Mn=function(t,e){var n,r,i,o;return n=/^\.[a-zA-Z_$0-9]+/,i=function(t){var e=t.matchPattern(r);return e?"."+e:null},r=/^\[(0|[1-9][0-9]*)\]/,o=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(r){var a,s,u,c,h,f,d;for(a=r.pos,s="";r.matchString("../");)s+="../";if(s||(c=r.matchString(".")||""),u=r.matchPattern(e.name)||"",!s&&!c&&o.test(u))return{t:t.GLOBAL,v:u};if("this"!==u||s||c||(u=".",a+=3),h=(s||c)+u,!h)return null;for(;f=r.matchPattern(n)||i(r);)h+=f;return r.matchString("(")&&(d=h.lastIndexOf("."),-1!==d?(h=h.substr(0,d),r.pos=a+h.length):r.pos-=1),{t:t.REFERENCE,n:h}}}(j,Tn),Pn=function(t){return function(e){var n,r;return n=e.pos,e.matchString("(")?(e.allowWhitespace(),(r=e.readExpression())?(e.allowWhitespace(),e.matchString(")")?{t:t.BRACKETED,x:r}:(e.pos=n,null)):(e.pos=n,null)):null}}(j),jn=function(t,e,n){return function(r){return t(r)||e(r)||n(r)}}(Fn,Mn,Pn),Dn=function(t,e){return function(n){var r,i,o;if(r=n.pos,n.allowWhitespace(),n.matchString(".")){if(n.allowWhitespace(),i=n.matchPattern(e.name))return{t:t.REFINEMENT,n:i};n.error("Expected a property name")}return n.matchString("[")?(n.allowWhitespace(),o=n.readExpression(),o||n.error("an expression"),n.allowWhitespace(),n.matchString("]")||n.error("Expected ']'"),{t:t.REFINEMENT,x:o}):null}}(j,Tn),$n=function(t,e,n,r){return function(i){var o,a,s,u;if(a=e(i),!a)return null;for(;a;)if(o=i.pos,s=r(i))a={t:t.MEMBER,x:a,r:s};else{if(!i.matchString("("))break;if(i.allowWhitespace(),u=n(i),i.allowWhitespace(),!i.matchString(")")){i.pos=o;break}a={t:t.INVOCATION,x:a},u&&(a.o=u)}return a}}(j,jn,Ln,Dn),Un=function(t,e){var n,r;return r=function(e,n){return function(r){var i,o;return r.matchString(e)?(i=r.pos,r.allowWhitespace(),o=r.readExpression(),o||r.error("Expected a JavaScript expression"),{s:e,o:o,t:t.PREFIX_OPERATOR}):n(r)}},function(){var t,i,o,a,s;for(a="! ~ + - typeof".split(" "),s=e,t=0,i=a.length;i>t;t+=1)o=r(a[t],s),s=o;n=s}(),n}(j,$n),Bn=function(t,e){var n,r;return r=function(e,n){return function(r){var i,o,a;if(o=n(r),!o)return null;for(;;){if(i=r.pos,r.allowWhitespace(),!r.matchString(e))return r.pos=i,o;if("in"===e&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,o;if(r.allowWhitespace(),a=n(r),!a)return r.pos=i,o;o={t:t.INFIX_OPERATOR,s:e,o:[o,a]}}}},function(){var t,i,o,a,s;for(a="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),s=e,t=0,i=a.length;i>t;t+=1)o=r(a[t],s),s=o;n=s}(),n}(j,Un),Wn=function(t,e){return function(n){var r,i,o,a;return(i=e(n))?(r=n.pos,n.allowWhitespace(),n.matchString("?")?(n.allowWhitespace(),(o=n.readExpression())?(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),a=n.readExpression(),a?{t:t.CONDITIONAL,o:[i,o,a]}:(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):null}}(j,Bn),Vn=function(t,e){function n(t){return JSON.stringify(String(t))}function r(n,i){var o,a;if(n.t===t.REFERENCE&&-1===i.indexOf(n.n)&&i.unshift(n.n),a=n.o||n.m)if(e(a))r(a,i);else for(o=a.length;o--;)r(a[o],i);n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(e,r,o){var a=function(t){return i(e,t,o)};switch(r.t){case t.BOOLEAN_LITERAL:case t.GLOBAL:case t.NUMBER_LITERAL:return r.v;case t.STRING_LITERAL:return n(r.v);case t.ARRAY_LITERAL:return"["+(r.m?r.m.map(a).join(","):"")+"]";case t.OBJECT_LITERAL:return"{"+(r.m?r.m.map(a).join(","):"")+"}";case t.KEY_VALUE_PAIR:return r.k+":"+i(e,r.v,o);case t.PREFIX_OPERATOR:return("typeof"===r.s?"typeof ":r.s)+i(e,r.o,o);case t.INFIX_OPERATOR:return i(e,r.o[0],o)+("in"===r.s.substr(0,2)?" "+r.s+" ":r.s)+i(e,r.o[1],o);case t.INVOCATION:return i(e,r.x,o)+"("+(r.o?r.o.map(a).join(","):"")+")";case t.BRACKETED:return"("+i(e,r.x,o)+")";case t.MEMBER:return i(e,r.x,o)+i(e,r.r,o);case t.REFINEMENT:return r.n?"."+r.n:"["+i(e,r.x,o)+"]";case t.CONDITIONAL:return i(e,r.o[0],o)+"?"+i(e,r.o[1],o)+":"+i(e,r.o[2],o);case t.REFERENCE:return"${"+o.indexOf(r.n)+"}";default:e.error("foo")}}return function(t){var e,n=[];return r(t,n),e={r:n,s:i(this,t,n)}}}(j,te),qn=function(t,e,n,r,i,o){var a,s,u=/^\s+/;return s=function(t){this.name="ParseError",this.message=t},s.prototype=Error.prototype,a=function(t,e){var n,r;for(this.str=t,this.options=e||{},this.pos=0,this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},a.prototype={read:function(t){var e,n,r,i;for(t||(t=this.converters),e=this.pos,r=t.length,n=0;r>n;n+=1)if(this.pos=e,i=t[n](this))return i;return null},readExpression:function(){return i(this)},flattenExpression:o,error:function(t){var e,n,r,i,o,a,u;e=this.str.split("\n"),o=-1,i=0;do r=i,n=e[o++ +1],i=n.length+1;while(i<this.pos);throw a=this.pos-r,u=t+" at line "+(o+1)+" character "+(a+1)+":\n"+n+"\n"+new Array(a+1).join(" ")+"^----",new s(u)},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(u)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},a.extend=function(t){var e,i,o=this;e=function(t,e){a.call(this,t,e)},e.prototype=n(o.prototype);for(i in t)r.call(t,i)&&(e.prototype[i]=t[i]);return e.extend=a.extend,e},t.Parser=a,a}(b,j,Fe,k,Wn,Vn),zn=function(t,e,n){function r(t){var e,r,i;return t.allowWhitespace(),(e=n(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(r=t.read())?(i.value=r.v,i):null):null):null}var i,o,a,s,u,c,h;return o={"true":!0,"false":!1,undefined:void 0,"null":null},a=new RegExp("^(?:"+Object.keys(o).join("|")+")"),s=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,u=/\$\{([^\}]+)\}/g,c=/^\$\{([^\}]+)\}/,h=/^\s*$/,i=t.extend({init:function(t,e){this.values=e.values},postProcess:function(t){return 1===t.length&&h.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(c),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(a))?{v:o[e]}:void 0},function(t){var e;return(e=t.matchPattern(s))?{v:+e}:void 0},function(t){var n,r=e(t);return r&&(n=t.values)?{v:r.v.replace(u,function(t,e){return e in n?n[e]:e})}:r},function(t){var e,n;if(!t.matchString("{"))return null;for(e={};n=r(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;for(e=[],t.allowWhitespace();n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]}),function(t,e){var n=new i(t,{values:e});return n.result}}(qn,On,An),Gn=function(t,e,n){function r(t){return"string"==typeof t?t:JSON.stringify(t)}var i=function(e){this.type=t.INTERPOLATOR,n.init(this,e)};return i.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,render:function(t){this.value=t,this.parentFragment.bubble()},teardown:function(){e(this)},toString:function(){return void 0==this.value?"":r(this.value)}},i}(j,qe,en),Qn=function(t,e,n,r,i){var o,a;return i.push(function(){a=i.StringFragment}),o=function(n){this.type=t.SECTION,this.fragments=[],this.length=0,e.init(this,n)},o.prototype={update:e.update,resolve:e.resolve,reassign:e.reassign,teardown:function(){this.teardownFragments(),r(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(t){var e;(e=this.root._wrapped[this.keypath])&&(t=e.get()),n(this,t),this.parentFragment.bubble()},createFragment:function(t){return new a(t)},toString:function(){return this.fragments.join("")}},o}(j,en,on,qe,b),Hn=function(t){var e=function(e){this.type=t.TEXT,this.text=e};return e.prototype={toString:function(){return this.text},reassign:function(){},teardown:function(){}},e}(j),Kn=function(t,e,n){function r(t,e,n,i){return i=i||0,t.map(function(t){var o,a,s;return t.text?t.text:t.fragments?t.fragments.map(function(t){return r(t.items,e,n,i)}).join(""):(o=n+"-"+i++,s=(a=t.root._wrapped[t.keypath])?a.value:t.value,e[o]=s,"${"+o+"}")}).join("")}var i={};return function(e){var o,a,s,u,c,h,f,d,l;return e=e||i,o=e.args,a=o||e.parse,f=o?"argsList":"value",d=o?"dirtyArgs":"dirtyValue",(this[d]||!this.hasOwnProperty(f))&&(1===this.items.length&&this.items[0].type===t.INTERPOLATOR?(s=this.items[0].value,void 0!==s&&(l=o?[s]:s)):(a&&(u={},c=r(this.items,u,this.root._guid),h=n(o?"["+c+"]":c,u)),l=h?h.value:o?[this.toString()]:this.toString()),this[f]=l,this[d]=!1),this[f]}}(j,X,zn),Zn=function(t,e,n,r,i,o,a,s){var u=function(t){n.init(this,t)};return u.prototype={reassign:n.reassign,createItem:function(e){if("string"==typeof e.descriptor)return new o(e.descriptor);switch(e.descriptor.t){case t.INTERPOLATOR:return new r(e);case t.TRIPLE:return new r(e);case t.SECTION:return new i(e);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirtyValue=this.dirtyArgs=!0,this.owner.bubble()},teardown:function(){var t,e;for(t=this.items.length,e=0;t>e;e+=1)this.items[e].teardown()},getValue:a,isSimple:function(){var e,n,r;if(void 0!==this.simple)return this.simple;for(e=this.items.length;e--;)if(n=this.items[e],n.type!==t.TEXT){if(n.type!==t.INTERPOLATOR)return this.simple=!1;if(r)return!1;r=!0}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var t,n=this.getValue();return"string"==typeof n&&(t=e(n),n=t?t.value:n),n}},s.StringFragment=u,u}(j,zn,Be,Gn,Qn,Hn,Kn,b),Yn=function(t,e,n,r,i,o,a,s,u){function c(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var h,f;return f=/allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|spellcheck|translate|trueSpeed|typeMustMatch|visible/,h=function(t){return this.type=e.ATTRIBUTE,this.element=t.element,n(this,t.name),t.value&&"string"!=typeof t.value?(this.root=t.root,this.pNode=t.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new u({descriptor:t.value,root:this.root,owner:this}),this.interpolator=o(this),void(this.pNode&&("value"===this.name&&(this.isValueAttribute=!0,"INPUT"===this.pNode.tagName&&"file"===this.pNode.type&&(this.isFileInputValue=!0)),i(this,t),this.selfUpdating=this.fragment.isSimple(),this.ready=!0))):void r(this,t)},h.prototype={bind:a,update:s,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,"name"===this.propertyName&&(this.pNode.name="{{"+this.keypath+"}}")},reassign:function(t,e,n,r){this.fragment&&(this.fragment.reassign(t,e,n,r),this.twoway&&this.updateBindings())},teardown:function(){var t;if(this.boundEvents)for(t=this.boundEvents.length;t--;)this.pNode.removeEventListener(this.boundEvents[t],this.updateModel,!1);this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(t.addAttribute(this),this.deferred=!0)},toString:function(){var t,e;if(null===this.value)return this.name;if("value"!==this.name||"select"!==this.element.lcName)return"name"===this.name&&"input"===this.element.lcName&&(e=this.interpolator)?"name={{"+(e.keypath||e.ref)+"}}":this.fragment&&f.test(this.name)?this.fragment.getValue()?this.name:null:(t=c(this.fragment?this.fragment.toString():this.value),this.name+(t?'="'+t+'"':""))}},h}(R,j,pn,gn,vn,mn,wn,bn,Zn),Jn=function(t){return function(e,n,r){var i=new t({element:e,name:n,value:r,root:e.root,pNode:e.node});e.attributes.push(e.attributes[n]=i),"name"!==n&&i.update()}}(Yn),Xn=function(t){return function(e,n){var r;e.attributes=[];for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r]);return e.attributes}}(Jn),tr=function(t,e,n,r){var i,o,a;return t.push(function(){i=t.DomFragment}),o=function(){var t=this.node,e=this.fragment.toString();if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},a=function(){this.node.type&&"text/javascript"!==this.node.type||e("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString()},function(t,e,n,s){return"script"===t.lcName||"style"===t.lcName?(t.fragment=new r({descriptor:n.f,root:t.root,owner:t}),void(s&&("script"===t.lcName?(t.bubble=a,t.node.text=t.fragment.toString()):(t.bubble=o,t.bubble())))):(t.fragment=new i({descriptor:n.f,root:t.root,pNode:e,owner:t,pElement:t}),void(s&&e.appendChild(t.fragment.docFrag)))}}(b,X,a,Zn),er=function(t,e){var n,r;return n={args:!0},r=function(r,i,o){var a,s,u,c=this;if(c.root=i,c.node=o.node,a=r.n||r,"string"!=typeof a&&(s=new e({descriptor:a,root:i,owner:o}),a=s.toString(),s.teardown()),r.a?c.params=r.a:r.d&&(c.fragment=new e({descriptor:r.d,root:i,owner:o}),c.params=c.fragment.getValue(n),c.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,c.params=this.getValue(n),c.ready&&c.update()}),c.fn=i.decorators[a],!c.fn){if(u='Missing "'+a+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators',i.debug)throw new Error(u);t(u)}},r.prototype={init:function(){var t,e;if(this.params?(e=[this.node].concat(this.params),t=this.fn.apply(this.root,e)):t=this.fn.call(this.root,this.node),!t||!t.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=t,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(t){this.actual.teardown(),!t&&this.fragment&&this.fragment.teardown()}},r}(X,Zn),nr=function(t,e){return function(n,r,i){var o=new e(n,r,i);o.fn&&(i.decorator=o,t.addDecorator(i.decorator))}}(R,er),rr=function(t,e){var n,r,i,o,a,s,u,c,h,f={args:!0};return n=function(t,e,n,i){var o,a;o=t.node._ractive.events,a=o[e]||(o[e]=new r(t,e,i)),a.add(n)},r=function(e,n){var r;this.element=e,this.root=e.root,this.node=e.node,this.name=n,this.proxies=[],(r=this.root.events[n])?this.custom=r(this.node,h(n)):("on"+n in this.node||t('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),this.node.addEventListener(n,c,!1))},r.prototype={add:function(t){this.proxies.push(new i(this.element,this.root,t))},teardown:function(){var t;for(this.custom?this.custom.teardown():this.node.removeEventListener(this.name,c,!1),t=this.proxies.length;t--;)this.proxies[t].teardown()},fire:function(t){for(var e=this.proxies.length;e--;)this.proxies[e].fire(t)}},i=function(t,n,r){var i;return this.root=n,i=r.n||r,this.n="string"==typeof i?i:new e({descriptor:r.n,root:this.root,owner:t}),r.a?(this.a=r.a,void(this.fire=a)):r.d?(this.d=new e({descriptor:r.d,root:this.root,owner:t}),void(this.fire=s)):void(this.fire=o)},i.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},o=function(t){this.root.fire(this.n.toString(),t)},a=function(t){this.root.fire.apply(this.root,[this.n.toString(),t].concat(this.a))},s=function(t){var e=this.d.getValue(f);"string"==typeof e&&(e=e.substr(1,e.length-2)),this.root.fire.apply(this.root,[this.n.toString(),t].concat(e))},c=function(t){var e=this._ractive;e.events[t.type].fire({node:this,original:t,index:e.index,keypath:e.keypath,context:e.root.get(e.keypath)})},u={},h=function(t){return u[t]?u[t]:u[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath,e.context=n.root.get(n.keypath),n.events[t].fire(e)}},n}(X,Zn),ir=function(t){return function(e,n){var r,i,o;for(i in n)if(n.hasOwnProperty(i))for(o=i.split("-"),r=o.length;r--;)t(e,o[r],n[i])}}(rr),or=function(t){var e,n,r,i,o;e=t.root;do for(n=e._liveQueries,r=n.length;r--;)i=n[r],o=n["_"+i],o._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(o);while(e=e._parent)},ar=function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},sr=function(t,e,n){var r,i;if(t)return r={},i=n("div").style,function(t){var n,o,a;if(!r[t])if(void 0!==i[t])r[t]=t;else for(a=t.charAt(0).toUpperCase()+t.substring(1),n=e.length;n--;)if(o=e[n],void 0!==i[o+a]){r[t]=o+a;break}return r[t]}}(u,m,s),ur=function(t,e,n,r){var i;if(e)return i=window.getComputedStyle||t.getComputedStyle,function(t){var e,i,o,a,s;if(e=window.getComputedStyle(this.node),"string"==typeof t)return s=e[r(t)],"0px"===s&&(s=0),s;if(!n(t))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");
for(i={},o=t.length;o--;)a=t[o],s=e[r(a)],"0px"===s&&(s=0),i[a]=s;return i}}(r,u,L,sr),cr=function(t){return function(e,n){var r;if("string"==typeof e)this.node.style[t(e)]=n;else for(r in e)e.hasOwnProperty(r)&&(this.node.style[t(r)]=e[r]);return this}}(sr),hr=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})},fr=function(t,e,n){function r(t){return t}var i=function(i){var o;this.duration=i.duration,this.step=i.step,this.complete=i.complete,"string"==typeof i.easing?(o=i.root.easing[i.easing],o||(t('Missing easing function ("'+i.easing+'"). You may need to download a plugin from [TODO]'),o=r)):o="function"==typeof i.easing?i.easing:r,this.easing=o,this.start=e(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return i.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},i}(X,w,C),dr=function(t){var e=new RegExp("^-(?:"+t.join("|")+")-");return function(t){return t.replace(e,"")}}(m),lr=function(t){var e=new RegExp("^(?:"+t.join("|")+")([A-Z])");return function(t){var n;return t?(e.test(t)&&(t="-"+t),n=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""}}(m),pr=function(t,e,n,r,i,o,a,s,u){var c,h,f,d,l,p,g,v={},m={};if(t)return c=n("div").style,function(){void 0!==c.transition?(h="transition",f="transitionend",d=!0):void 0!==c.webkitTransition?(h="webkitTransition",f="webkitTransitionEnd",d=!0):d=!1}(),h&&(l=h+"Duration",p=h+"Property",g=h+"TimingFunction"),function(t,n,c,h,d,y){setTimeout(function(){var w,b,x,_;_=function(){b&&x&&y()},w=t.node.namespaceURI+t.node.tagName,t.node.style[p]=h.map(a).map(u).join(","),t.node.style[g]=u(c.easing||"linear"),t.node.style[l]=c.duration/1e3+"s",d=function(e){var n;n=h.indexOf(r(s(e.propertyName))),-1!==n&&h.splice(n,1),h.length||(t.root.fire(t.name+":end"),t.node.removeEventListener(f,d,!1),x=!0,_())},t.node.addEventListener(f,d,!1),setTimeout(function(){for(var s,u,l,p,g=h.length,y=[];g--;)p=h[g],s=w+p,v[s]?t.node.style[a(p)]=n[p]:u=t.getStyle(p),void 0===v[s]&&(t.node.style[a(p)]=n[p],v[s]=t.getStyle(p)!=n[p],m[s]=!v[s]),m[s]&&(l=h.indexOf(p),-1===l?e("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):h.splice(l,1),t.node.style[a(p)]=u,y.push({name:a(p),interpolator:i(u,n[p])}));y.length?new o({root:t.root,duration:c.duration,easing:r(c.easing),step:function(e){var n,r;for(r=y.length;r--;)n=y[r],t.node.style[n.name]=n.interpolator(e)},complete:function(){b=!0,_()}}):b=!0,h.length||(t.node.removeEventListener(f,d,!1),x=!0,_())},0)},c.delay||0)}}(u,X,s,hr,ne,fr,sr,dr,lr),gr=function(t,e,n,r,i,o){var a;if(e)return a=window.getComputedStyle||t.getComputedStyle,function(t,e,a,s){var u,c=this;"string"==typeof t?(u={},u[t]=e):(u=t,s=a,a=e),a||(n('The "'+c.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),a=c,s=c.complete);var h=new r(function(t){var e,n,r,s,h,f,d,l;if(!a.duration)return c.setStyle(u),void t();for(e=Object.keys(u),n=[],r=window.getComputedStyle(c.node),h={},d=e.length;d--;)l=e[d],s=r[i(l)],"0px"===s&&(s=0),s!=u[l]&&(n.push(l),c.node.style[i(l)]=s);return n.length?void o(c,u,a,n,f,t):void t()});return s&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),h.then(s)),h}}(r,u,X,g,sr,pr),vr=function(t,e){var n;for(n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n]);return t},mr=function(t){return function(e,n){return"number"==typeof e?e={duration:e}:"string"==typeof e?e="slow"===e?{duration:600}:"fast"===e?{duration:200}:{duration:400}:e||(e={}),t(e,n)}}(vr),yr=function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},wr=function(t,e,n,r,i,o,a,s){var u,c;return u={args:!0},c=function(n,r,i,o){var a,s,c,h=this;if(this.root=r,this.node=i.node,this.isIntro=o,this.originalStyle=this.node.getAttribute("style"),h.complete=function(t){!t&&h.isIntro&&h.resetStyle(),h.node._ractive.transition=null,h._manager.remove(h)},a=n.n||n,"string"!=typeof a&&(s=new e({descriptor:a,root:this.root,owner:i}),a=s.toString(),s.teardown()),this.name=a,n.a?this.params=n.a:n.d&&(s=new e({descriptor:n.d,root:this.root,owner:i}),this.params=s.getValue(u),s.teardown()),this._fn=r.transitions[a],!this._fn){if(c='Missing "'+a+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions',r.debug)throw new Error(c);return void t(c)}},c.prototype={init:n,getStyle:r,setStyle:i,animateStyle:o,processParams:a,resetStyle:s},c}(X,Zn,ar,ur,cr,gr,mr,yr),br=function(t,e){return function(n,r,i,o){var a,s,u;!r.transitionsEnabled||r._parent&&!r._parent.transitionsEnabled||(a=new e(n,r,i,o),a._fn&&(s=a.node,(u=s._ractive.transition)&&u.complete(),s._ractive.transition=a,t.addTransition(a)))}}(R,wr),xr=function(t,e,n,r,i,o,a,s,u,c,h,f,d,l,p,g,v){function m(t){do if("select"===t.lcName)return t;while(t=t.parent)}return function(y,w,b){var x,_,E,k,N,O,T,A,S,R,C,L;if(y.type=e.ELEMENT,x=y.parentFragment=w.parentFragment,_=x.pNode,E=y.descriptor=w.descriptor,y.parent=w.pElement||x.pElement,y.root=R=x.root,y.index=w.index,y.lcName=E.e.toLowerCase(),y.eventListeners=[],y.customEventListeners=[],y.cssDetachQueue=[],"option"===y.lcName&&(y.select=m(y.parent)),_&&(k=y.namespace=u(E,_),N=k!==n.html?v(E.e):E.e,y.node=a(N,k),R.css&&_===R.el&&y.node.setAttribute("data-rvcguid",R.constructor._guid||R._guid),i(y.node,"_ractive",{value:{proxy:y,keypath:s(x),index:x.indexRefs,events:r(null),root:R}})),O=h(y,E.a),E.f){if(y.node&&y.node.getAttribute("contenteditable")&&y.node.innerHTML){if(L="A pre-populated contenteditable element should not have children",R.debug)throw new Error(L);o(L)}f(y,y.node,E,b)}b&&E.v&&l(y,E.v),b&&(R.twoway&&(y.bind(),y.node.getAttribute("contenteditable")&&y.node._ractive.binding&&y.node._ractive.binding.update()),O.name&&!O.name.twoway&&O.name.update(),"IMG"===y.node.tagName&&((T=y.attributes.width)||(A=y.attributes.height))&&y.node.addEventListener("load",S=function(){T&&(y.node.width=T.value),A&&(y.node.height=A.value),y.node.removeEventListener("load",S,!1)},!1),b.appendChild(y.node),E.o&&d(E.o,R,y),(E.t0||E.t1)&&g(E.t0||E.t1,R,y,!0),"OPTION"===y.node.tagName&&("SELECT"===_.tagName&&(C=_._ractive.binding)&&C.deferUpdate(),O.value||c(y,"value",E.f),y.node._ractive.value==_._ractive.value&&(y.node.selected=!0)),y.node.autofocus&&t.focus(y.node)),p(y)}}(R,j,a,Fe,c,X,s,N,dn,Jn,Xn,tr,nr,ir,or,br,ln),_r=function(t,e){function n(t){var e,n,r;for(r=t.liveQueries.length;r--;)e=t.liveQueries[r],n=e.selector,e._remove(t.node)}return function(r){var i,o,a;for(r&&(this.willDetach=!0,t.detachWhenReady(this)),this.fragment&&this.fragment.teardown(!1);this.attributes.length;)this.attributes.pop().teardown();if(this.node){for(i in this.node._ractive.events)this.node._ractive.events[i].teardown();(o=this.node._ractive.binding)&&(o.teardown(),a=this.root._twowayBindings[o.attr.keypath],a.splice(a.indexOf(o),1))}this.decorator&&this.decorator.teardown(),(this.descriptor.t0||this.descriptor.t2)&&e(this.descriptor.t0||this.descriptor.t2,this.root,this,!1),this.liveQueries&&n(this)}}(R,br),Er=function(t){return function(e,n,r,i){var o,a,s,u,c,h,f,d,l;for(o=this.attributes.length;o--;)this.attributes[o].reassign(e,n,r,i);if(a=this.node._ractive){t(a,"keypath",r,i),void 0!=e&&(a.index[e]=n);for(s in a.events)for(u=a.events[s].proxies,o=u.length;o--;)c=u[o],"object"==typeof c.n&&c.a.reassign(e,n,r,i),c.d&&c.d.reassign(e,n,r,i);(h=a.binding)&&h.keypath.substr(0,r.length)===r&&(f=a.root._twowayBindings[h.keypath],f.splice(f.indexOf(h),1),h.keypath=h.keypath.replace(r,i),f=a.root._twowayBindings[h.keypath]||(a.root._twowayBindings[h.keypath]=[]),f.push(h))}if(this.fragment&&this.fragment.reassign(e,n,r,i),d=this.liveQueries)for(l=this.root,o=d.length;o--;)d[o]._makeDirty()}}($e),kr=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Nr=function(t,e){function n(t){var n,r,i,o,a,s,u;if(r=t.attributes.value,r.value)n=r.value;else{if(i=r.interpolator,!i)return;n=t.root.get(i.keypath||i.ref)}if(o=t.select.attributes.value,a=o.interpolator){if(s=t.root.get(a.keypath||a.ref),s==n)return!0;if(t.select.attributes.multiple&&e(s))for(u=s.length;u--;)if(s[u]==n)return!0}}function r(t){var e,n,r,i;return e=t.attributes,n=e.type,r=e.value,i=e.name,n&&"radio"===n.value&&r&&i.interpolator&&r.value===i.interpolator.value?!0:void 0}function i(t){var e=t.toString();return e?" "+e:""}return function(){var e;return e="<"+(this.descriptor.y?"!doctype":this.descriptor.e),e+=this.attributes.map(i).join(""),"option"===this.lcName&&n(this)&&(e+=" selected"),"input"===this.lcName&&r(this)&&(e+=" checked"),e+=">",this.fragment&&(e+=this.fragment.toString()),t.test(this.descriptor.e)||(e+="</"+this.descriptor.e+">"),this.stringifying=!1,e}}(kr,L),Or=function(t){return function(e){return t(this.node,e)?this.node:this.fragment&&this.fragment.find?this.fragment.find(e):void 0}}(se),Tr=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Ar=function(t){return this.fragment?this.fragment.findComponent(t):void 0},Sr=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Rr=function(){var t=this.attributes;if(this.node&&(this.binding&&(this.binding.teardown(),this.binding=null),!(this.node.getAttribute("contenteditable")&&t.value&&t.value.bind())))switch(this.lcName){case"select":case"textarea":return void(t.value&&t.value.bind());case"input":if("radio"===this.node.type||"checkbox"===this.node.type){if(t.name&&t.name.bind())return;if(t.checked&&t.checked.bind())return}if(t.value&&t.value.bind())return}},Cr=function(t,e,n,r,i,o,a,s,u,c,h){var f=function(t,e){n(this,t,e)};return f.prototype={detach:function(){var n;if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node;if(this.cssDetachQueue.length){for(t.start();n===this.cssDetachQueue.pop();)e.remove(n);t.end()}},teardown:r,reassign:i,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:o,find:a,findAll:s,findComponent:u,findAllComponents:c,bind:h},f}(R,_,xr,_r,Er,Nr,Or,Tr,Ar,Sr,Rr),Lr={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},Ir={},Fr=function(){var t=/^[^\s=]+/,e=/^\s+/;return function(n){var r,i,o;return n.matchString("=")?(r=n.pos,n.allowWhitespace(),(i=n.matchPattern(t))?n.matchPattern(e)?(o=n.matchPattern(t))?(n.allowWhitespace(),n.matchString("=")?[i,o]:(n.pos=r,null)):(n.pos=r,null):null:(n.pos=r,null)):null}}(),Mr=function(t){var e={"#":t.SECTION,"^":t.INVERTED,"/":t.CLOSING,">":t.PARTIAL,"!":t.COMMENT,"&":t.TRIPLE};return function(t){var n=e[t.str.charAt(t.pos)];return n?(t.pos+=1,n):null}}(j),Pr=function(t,e){function n(e,n){for(var r,i=[];n.t===t.MEMBER&&n.r.t===t.REFINEMENT;)r=n.r,i.unshift(r.x?r.x.t===t.REFERENCE?r.x:e.flattenExpression(r.x):r.n),n=n.x;return n.t!==t.REFERENCE?null:{r:n.n,m:i}}var r=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,i=/^[0-9][1-9]*$/;return function(o,a){var s,u,c,h,f,d,l,p,g,v;if(s=o.pos,c={},a)c.t=t.TRIPLE;else if((f=o.readExpression())&&(c.t=t.INTERPOLATOR,o.allowWhitespace(),o.matchString(o.delimiters[1])?o.pos-=o.delimiters[1].length:(o.pos=s,f=null)),!f&&(h=e(o),c.t=h||t.INTERPOLATOR,c.t===t.INVERTED&&(c.t=t.SECTION,c.n=1),(h===t.COMMENT||h===t.CLOSING)&&(l=o.remaining(),p=l.indexOf(o.delimiters[1]),-1!==p)))return c.r=l.substr(0,p),o.pos+=p,c;if(!f&&(o.allowWhitespace(),f=o.readExpression(),l=o.remaining(),g=a?o.tripleDelimiters[1]:o.delimiters[1],l.substr(0,g.length)!==g&&":"!==l.charAt(0))){if(u=o.pos,o.pos=s,l=o.remaining(),p=l.indexOf(o.delimiters[1]),-1!==p)return c.r=l.substr(0,p).trim(),o.pos+=p,c;o.pos=u}for(;f.t===t.BRACKETED&&f.x;)f=f.x;return f.t===t.REFERENCE?c.r=f.n:f.t===t.NUMBER_LITERAL&&i.test(f.v)?c.r=f.v:(v=n(o,f))?c.kx=v:c.x=o.flattenExpression(f),(d=o.matchPattern(r))&&(c.i=d),c}}(j,Mr),jr=function(t,e,n){function r(t){var e=t.tripleDelimiters[0].length>t.delimiters[0].length;return i(t,e)||i(t,!e)}function i(r,i){var a,s,u,c,h=r.pos;if(s=i?r.tripleDelimiters:r.delimiters,!r.matchString(s[0]))return null;if(a=e(r))return r.matchString(s[1])?(r[i?"tripleDelimiters":"delimiters"]=a,o):null;if(r.allowWhitespace(),a=n(r,i),null===a)return r.pos=h,null;if(r.allowWhitespace(),r.matchString(s[1])||r.error("Expected closing delimiter '"+s[1]+"' after reference"),a.t===t.COMMENT&&(a.exclude=!0),a.t===t.SECTION||a.t===t.INVERTED){for(u=[];(c=r.read())&&c.t!==t.CLOSING;)u.push(c);u.length&&(a.f=u)}return a}var o={t:t.DELIMCHANGE,exclude:!0};return r}(j,Fr,Pr),Dr=function(t){var e="<!--",n="-->";return function(r){var i,o,a;return r.matchString(e)?(o=r.remaining(),a=o.indexOf(n),-1===a&&r.error("Illegal HTML - expected closing comment sequence ('-->')"),i=o.substr(0,a),r.pos+=a+3,{t:t.COMMENT,c:i}):null}}(j),$r=function(t,e){var n,r,i;for(n=e.length;n--;){if(r=t.indexOf(e[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},Ur=function(){function t(t){return t?10===t?32:128>t?t:159>=t?n[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}var e,n,r,i,o;return e={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},n=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],r=new RegExp("&("+Object.keys(e).join("|")+");?","g"),i=/&#x([0-9]+);?/g,o=/&#([0-9]+);?/g,function(n){var a;return a=n.replace(r,function(t,n){return e[n]?String.fromCharCode(e[n]):t}),a=a.replace(i,function(e,n){return String.fromCharCode(t(parseInt(n,16)))}),a=a.replace(o,function(e,n){return String.fromCharCode(t(n))})}}(),Br=function(t,e,n){return function(t){var r,i,o;return i=t.remaining(),o=t.inside?"</"+t.inside:"<",(r=t.inside&&!t.interpolate[t.inside]?i.indexOf(o):e(i,[o,t.delimiters[0],t.tripleDelimiters[0]]))?(-1===r&&(r=i.length),t.pos+=r,n(i.substr(0,r))):null}}(j,$r,Ur),Wr=function(t){var e=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(n){var r;return n.matchString("</")?(r=n.matchPattern(e))?{t:t.CLOSING_TAG,e:r}:(n.pos-=2,void n.error("Illegal closing tag")):null}}(j),Vr=function(t,e){function n(t){var e,n,i;return t.allowWhitespace(),(n=t.matchPattern(u))?(e={name:n},i=r(t),i&&(e.value=i),e):null}function r(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=a(t,"'")||a(t,'"')||o(t),null===n?(t.pos=e,null):1===n.length&&"string"==typeof n[0]?n[0]:n):(t.pos=e,null)}function i(t){var e,n,r;return e=t.pos,(n=t.matchPattern(c))?(-1!==(r=n.indexOf(t.delimiters[0]))&&(n=n.substr(0,r),t.pos=e+n.length),n):null}function o(t){var n,r;for(n=[],r=e(t)||i(t);null!==r;)n.push(r),r=e(t)||i(t);return n.length?n:null}function a(t,n){var r,i,o;if(r=t.pos,!t.matchString(n))return null;for(i=[],o=e(t)||s(t,n);null!==o;)i.push(o),o=e(t)||s(t,n);return t.matchString(n)?i:(t.pos=r,null)}function s(e,n){var r,i,o;return r=e.pos,o=e.remaining(),i=t(o,[n,e.delimiters[0],e.delimiters[1]]),-1===i&&e.error("Quoted attribute value must have a closing quote"),i?(e.pos+=i,o.substr(0,i)):null}var u=/^[^\s"'>\/=]+/,c=/^[^\s"'=<>`]+/;return n}($r,jr),qr=function(t,e){return function(t){var n,r,i,o,a,s;if("string"==typeof t){if(-1===t.indexOf(":"))return t;t=[t]}for(n={},o=[],a=[];t.length;)if(r=t.shift(),"string"==typeof r){if(i=r.indexOf(":"),-1!==i){i&&o.push(r.substr(0,i)),r.length>i+1&&(a[0]=r.substring(i+1));break}o.push(r)}else o.push(r);return a=a.concat(t),a.length||"string"!=typeof o?(n={n:1===o.length&&"string"==typeof o[0]?o[0]:o},1===a.length&&"string"==typeof a[0]?(s=e("["+a[0]+"]"),n.a=s?s.value:a[0]):n.d=a):n=o,n}}(j,zn),zr=function(t,e,n,r,i,o,a,s){function u(n){var r,i,o,u,v,m,y,w,b;if(r=n.pos,n.inside)return null;if(!n.matchString("<"))return null;if("/"===n.nextChar())return null;if(i={t:t.ELEMENT},n.matchString("!")&&(i.y=1),i.e=n.matchPattern(h),!i.e)return null;for(f.test(n.nextChar())||n.error("Illegal tag name");m=a(n);)(u=p[m.name])?i[u]=s(m.value):(v=l.exec(m.name))?(i.v||(i.v={}),i.v[v[1]]=s(m.value)):n.sanitizeEventAttributes&&d.test(m.name)||(i.a||(i.a={}),i.a[m.name]=m.value||0);if(n.allowWhitespace(),n.matchString("/")&&(y=!0),!n.matchString(">"))return null;if(o=i.e.toLowerCase(),!y&&!e.test(i.e)){for(("script"===o||"style"===o)&&(n.inside=o),w=[];(b=n.read(c))&&b.t!==t.CLOSING&&b.t!==t.CLOSING_TAG;)w.push(b);w.length&&(i.f=w)}return n.inside=null,n.sanitizeElements&&-1!==n.sanitizeElements.indexOf(o)?g:i}var c,h=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,f=/^[\s\n\/>]/,d=/^on/,l=/^on-([a-zA-Z$_][a-zA-Z$_0-9]+)/,p={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},g={exclude:!0};return c=[n,r,u,i,o],u}(j,kr,jr,Dr,Br,Wr,Vr,qr),Gr=function(){var t=/^[ \n]+/,e=/[ \n]+$/;return function(n){var r;r=n[0],"string"==typeof r&&(r=r.replace(t,""),r?n[0]=r:n.shift()),r=n[n.length-1],"string"==typeof r&&(r=r.replace(e,""),r?n[n.length-1]=r:n.pop())}}(),Qr=function(t){function e(t){return"string"==typeof t}function n(e){return e.t===t.COMMENT||e.t===t.DELIMCHANGE}function r(e){return(e.t===t.SECTION||e.t===t.INVERTED)&&e.f}var i=/^\s*\r?\n/,o=/\r?\n\s*$/;return function(t){var a,s,u,c,h;for(a=1;a<t.length;a+=1)s=t[a],u=t[a-1],c=t[a-2],e(s)&&n(u)&&e(c)&&o.test(c)&&i.test(s)&&(t[a-2]=c.replace(o,"\n"),t[a]=s.replace(i,"")),r(s)&&e(u)&&o.test(u)&&e(s.f[0])&&i.test(s.f[0])&&(t[a-1]=u.replace(o,"\n"),s.f[0]=s.f[0].replace(i,"")),e(s)&&r(u)&&(h=u.f[u.f.length-1],e(h)&&o.test(h)&&i.test(s)&&(u.f[u.f.length-1]=h.replace(o,"\n"),t[a]=s.replace(i,"")));return t}}(j),Hr=function(t,e,n,r,i,o,a,s){function u(e,n,r){var i,o;for(s(e),i=e.length;i--;)o=e[i],o.exclude?e.splice(i,1):n&&o.t===t.COMMENT&&e.splice(i,1),o.f&&(u(o.f,n,r),r||o.t!==t.ELEMENT||a(o.f));for(i=e.length;i--;)"string"==typeof e[i]&&"string"==typeof e[i+1]&&(e[i]=e[i]+e[i+1],e.splice(i+1,1))}var c,h,f,d,l,p;return f=/^\s*$/,d=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,l=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,c=e.extend({init:function(t,e){this.delimiters=e.delimiters||["{{","}}"],this.tripleDelimiters=e.tripleDelimiters||["{{{","}}}"],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes},postProcess:function(t,e){return u(t,e.stripComments!==!1,e.preserveWhitespace),e.preserveWhitespace||a(t),t},converters:[n,r,i,o]}),h=function(t,e){var n;return e=e||{},d.test(t)?p(t,e):(e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),n=new c(t,e),n.leftover&&n.error("Unexpected character"),n.result)},p=function(t,e){var n,r,i,o,a,s;for(i={},n="",r=t;a=d.exec(r);){if(o=a[1],n+=r.substr(0,a.index),r=r.substring(a.index+a[0].length),s=l.exec(r),!s||s[1]!==o)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");i[o]=h(r.substr(0,s.index),e),r=r.substring(s.index+s[0].length)}return{main:h(n,e),partials:i}},h}(j,qn,jr,Dr,zr,Br,Gr,Qr),Kr=function(){function t(t,e){var r=n.exec(e)[0];return null===t||r.length<t.length?r:t}var e=/^\s*$/,n=/^\s*/;return function(n){var r,i,o,a;return r=n.split("\n"),i=r[0],void 0!==i&&e.test(i)&&r.shift(),o=r[r.length-1],void 0!==o&&e.test(o)&&r.pop(),a=r.reduce(t,null),a&&(n=r.map(function(t){return t.replace(a,"")}).join("\n")),n}}(),Zr=function(t,e,n,r,i,o,a){function s(e,n){var r;if(e.partials[n]){if("string"==typeof e.partials[n]){if(!o)throw new Error(t.missingParser);r=o(e.partials[n],e.parseOptions),u(r,n,e.partials)}return e.partials[n]}}function u(t,e,n){var i;if(r(t)){n[e]=t.main;for(i in t.partials)t.partials.hasOwnProperty(i)&&(n[i]=t.partials[i])}else n[e]=t}return function(r,c){var h,f,d;if(f=s(r,c))return f;if(e&&(h=document.getElementById(c),h&&"SCRIPT"===h.tagName)){if(!o)throw new Error(t.missingParser);u(o(a(h.text),r.parseOptions),c,i)}if(f=i[c],!f){if(d='Could not find descriptor for partial "'+c+'"',r.debug)throw new Error(d);return n(d),[]}return f}}(Lr,u,X,te,Ir,Hr,Kr),Yr=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},Jr=function(t,e,n,r){var i,o;return r.push(function(){o=r.DomFragment}),i=function(n,r){var i,a=this.parentFragment=n.parentFragment;if(this.type=t.PARTIAL,this.name=n.descriptor.r,this.index=n.index,!n.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");i=e(a.root,n.descriptor.r),this.fragment=new o({descriptor:i,root:a.root,pNode:a.pNode,owner:this}),r&&r.appendChild(this.fragment.docFrag)},i.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},reassign:function(t,e,n,r){return this.fragment.reassign(t,e,n,r)},teardown:function(t){this.fragment.teardown(t)},toString:function(){var e,r,i,o;return e=this.fragment.toString(),r=this.parentFragment.items[this.index-1],r&&r.type===t.TEXT?(i=r.descriptor.split("\n").pop(),(o=/^\s+$/.exec(i))?n(e,o[0]):e):e},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)}},i}(j,Zr,Yr,b),Xr=function(t,e){var n,r;return n={parse:!0},r=function(t,r,i){this.parentFragment=t.parentFragment,this.component=t,this.key=r,this.fragment=new e({descriptor:i,root:t.root,owner:this}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue(n)},r.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(t.addAttribute(this),this.deferred=!0)},update:function(){var t=this.fragment.getValue(n);this.component.instance.set(this.key,t),this.value=t},teardown:function(){this.fragment.teardown()}},r}(R,Zn),ti=function(t,e,n,r,i){function o(o,a,s,u){var c,h,f,d,l,p;return f=o.root,d=o.parentFragment,"string"==typeof s?(h=e(s),h?h.value:s):null===s?!0:1===s.length&&s[0].t===t.INTERPOLATOR&&s[0].r?d.indexRefs&&void 0!==d.indexRefs[p=s[0].r]?(o.indexRefBindings[p]=a,d.indexRefs[p]):(l=n(f,s[0].r,d)||s[0].r,u.push({childKeypath:a,parentKeypath:l}),r(f,l)):(c=new i(o,a,s),o.complexParameters.push(c),c.value)}return function(t,e,n,r){var i,a,s={};t.complexParameters=[];for(i in n)n.hasOwnProperty(i)&&(a=o(t,i,n[i],r),(void 0!==a||void 0===e[i])&&(s[i]=a));return s}}(j,zn,O,J,Xr),ei=function(){function t(t,e){var n,r,i;if(n=t.adapt.length?t.adapt.map(function(e){return"object"==typeof e?e:t.adaptors[e]||e}):[],r=e.length)for(i=0;r>i;i+=1)-1===n.indexOf(e[i])&&n.push(e[i]);return n}return function(e,n,r,i,o){var a,s,u,c,h;return s=e.parentFragment,c=e.root,u={content:o||[]},h=t(c,n.defaults.adapt,n.adaptors),a=new n({el:s.pNode,append:!0,data:r,partials:u,magic:c.magic||n.defaults.magic,modifyArrays:c.modifyArrays,_parent:c,_component:e,adapt:h}),i&&(a.insert(i),a.fragment.pNode=a.el=s.pNode),a}}(),ni=function(t,e,n){return function(r,i){i.forEach(function(i){var o,a;t(r,r.root,i.parentKeypath,i.childKeypath),o=e(r.instance,i.childKeypath),a=e(r.root,i.parentKeypath),void 0!==o&&void 0===a&&n(r.root,i.parentKeypath,o)})}}(K,J,U),ri=function(t){function e(e,r,i,o){if("string"!=typeof o){if(r.debug)throw new Error(n);return void t(n)}e.on(i,function(){var t=Array.prototype.slice.call(arguments);t.unshift(o),r.fire.apply(r,t)})}var n="Components currently only support simple events - you cannot include arguments. Sorry!";return function(t,n){var r;for(r in n)n.hasOwnProperty(r)&&e(t.instance,t.root,r,n[r])}}(X),ii=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e._parent},oi=function(t,e,n,r,i,o,a){return function(s,u,c){var h,f,d,l,p;if(h=s.parentFragment=u.parentFragment,f=h.root,s.root=f,s.type=t.COMPONENT,s.name=u.descriptor.e,s.index=u.index,s.indexRefBindings={},s.bindings=[],d=f.components[u.descriptor.e],!d)throw new Error('Component "'+u.descriptor.e+'" not found');p=[],l=n(s,d.data||{},u.descriptor.a,p),r(s,d,l,c,u.descriptor.f),i(s,p),o(s,u.descriptor.v),(u.descriptor.t1||u.descriptor.t2||u.descriptor.o)&&e('The "intro", "outro" and "decorator" directives have no effect on components'),a(s)}}(j,X,ti,ei,ni,ri,ii),ai=function(t,e){function n(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e._parent)}var r=function(e,n){t(this,e,n)};return r.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(t){for(;this.complexParameters.length;)this.complexParameters.pop().teardown();for(;this.bindings.length;)this.bindings.pop().teardown();n(this),this.shouldDestroy=t,this.instance.teardown()},reassign:function(t,n,r,i){var o,a,s=this.instance,u=s._parent;this.bindings.forEach(function(o){var a;o.root===u&&(o.keypath===t&&s.set(o.otherKeypath,n),(a=e(o.keypath,r,i))&&o.reassign(a))}),(o=this.indexRefBindings[t])&&s.set(o,n),(a=this.root._liveComponentQueries["_"+this.name])&&a._makeDirty()},toString:function(){return this.instance.fragment.toString()},find:function(t){return this.instance.fragment.find(t)},findAll:function(t,e){return this.instance.fragment.findAll(t,e)},findComponent:function(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance},findAllComponents:function(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}},r}(oi,De),si=function(t,e){var n=function(e,n){this.type=t.COMMENT,this.descriptor=e.descriptor,n&&(this.node=document.createComment(e.descriptor.c),n.appendChild(this.node))};return n.prototype={detach:e,teardown:function(t){t&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.c+"-->"}},n}(j,We),ui=function(t,e,n,r,i,o,a,s,u,c,h,f){var d=function(t){t.pNode&&(this.docFrag=document.createDocumentFragment()),n.init(this,t)};return d.prototype={reassign:n.reassign,detach:function(){var t,e;if(this.docFrag){if(this.nodes)for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);else if(this.items)for(t=this.items.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.items[e].detach());return this.docFrag}},createItem:function(e){if("string"==typeof e.descriptor)return new r(e,this.docFrag);switch(e.descriptor.t){case t.INTERPOLATOR:return new i(e,this.docFrag);case t.SECTION:return new o(e,this.docFrag);case t.TRIPLE:return new a(e,this.docFrag);case t.ELEMENT:return this.root.components[e.descriptor.e]?new c(e,this.docFrag):new s(e,this.docFrag);case t.PARTIAL:return new u(e,this.docFrag);case t.COMMENT:return new h(e,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}},teardown:function(t){var e;if(this.nodes&&t)for(;e=this.nodes.pop();)e.parentNode.removeChild(e);else if(this.items)for(;this.items.length;)this.items.pop().teardown(t);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(t){var e=t.index;return this.items[e+1]?this.items[e+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){return this.items?this.items.join(""):""},find:function(t){var n,r,i,o,a;if(this.nodes){for(r=this.nodes.length,n=0;r>n;n+=1)if(o=this.nodes[n],1===o.nodeType){if(e(o,t))return o;if(a=o.querySelector(t))return a}return null}if(this.items){for(r=this.items.length,n=0;r>n;n+=1)if(i=this.items[n],i.find&&(a=i.find(t)))return a;return null}},findAll:function(t,n){var r,i,o,a,s,u,c;if(this.nodes){for(i=this.nodes.length,r=0;i>r;r+=1)if(a=this.nodes[r],1===a.nodeType&&(e(a,t)&&n.push(a),s=a.querySelectorAll(t)))for(u=s.length,c=0;u>c;c+=1)n.push(s[c])}else if(this.items)for(i=this.items.length,r=0;i>r;r+=1)o=this.items[r],o.findAll&&o.findAll(t,n);return n},findComponent:function(t){var e,n,r,i;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(t)))return i;return null}},findAllComponents:function(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(t,e);return e}},f.DomFragment=d,d}(j,se,Be,Ve,nn,cn,fn,Cr,Jr,ai,si,b),ci=function(t,e,n){function r(t){for(var e;e=t._childInitQueue.shift();)e.instance.init&&e.instance.init(e.options),r(e.instance)}return function(i,o,a){if(this._rendering=!0,t.start(this,a),!this._initing)throw new Error("You cannot call ractive.render() directly!");
this.constructor.css&&e.add(this.constructor),this.fragment=new n({descriptor:this.template,root:this,owner:this,pNode:i}),i&&(o?i.insertBefore(this.fragment.docFrag,o):i.appendChild(this.fragment.docFrag)),this._parent&&this._parent._rendering||r(this),delete this._rendering,t.end()}}(R,_,ui),hi=function(t){return function(){return t("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}(X),fi=[,"data","computed","adaptors","components","decorators","easing","events","interpolators","partials","transitions"],di=function(t){for(var e,n,r=Array.prototype.slice.call(arguments,1);n=r.shift();)for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},li=function(){function t(t){var n="var __ractive=this;return("+t.replace(e,function(t,e){return'__ractive.get("'+e+'")'})+")";return new Function(n)}var e=/\$\{([^\}]+)\}/g;return function(e){return"function"==typeof e?{get:e}:"string"==typeof e?{get:t(e)}:("object"==typeof e&&"string"==typeof e.get&&(e={get:t(e.get),set:e.set}),e)}}(),pi=function(t,e,n){var r=function(t,n){this.root=t.ractive,this.keypath=n,this.priority=0,this.computation=t,e(this)};return r.prototype={update:function(){var e;e=this.root.get(this.keypath),t(e,this.value)||this.computation.bubble()},teardown:function(){n(this)}},r}(p,Q,H),gi=function(t,e,n,r){function i(t,e,n){var i,o,a;for(i=e.length;i--;)o=e[i],n[o.keypath]||(e.splice(i,1),e[o.keypath]=null,o.teardown());for(i=n.length;i--;)a=n[i],e[a]||(o=new r(t,a),e.push(e[a]=o))}var o=function(t,e,n){this.ractive=t,this.key=e,this.getter=n.get,this.setter=n.set,this.watchers=[],this.update()};return o.prototype={set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only in the current version");this.setter.call(this.ractive,t)},update:function(){var e,r,o,a;e=this.ractive,r=e._captured,r||(e._captured=[]);try{o=this.getter.call(e)}catch(s){e.debug&&t('Failed to compute "'+this.key+'": '+s.message||s),a=!0}i(this,this.watchers,e._captured),e._captured=r,a||(this.setting=!0,this.value=o,n(e,this.key,o),this.setting=!1),this.deferred=!1},bubble:function(){this.watchers.length<=1?this.update():this.deferred||(e.addComputation(this),this.deferred=!0)}},o}(X,R,U,pi),vi=function(t,e){return function(n,r){var i,o;for(i in r)o=t(r[i]),n._computations[i]=new e(n,i,o)}}(li,gi),mi=function(t,e,n){return function(r){return{fromId:function(t){var n;if(!e)throw new Error("Cannot retieve template #"+t+"as Ractive is not running in the client.");if("#"===t.charAt(0)&&(t=t.substring(1)),!(n=document.getElementById(t)))throw new Error("Could not find template element with id #"+t);return n.innerHTML},parse:function(e,i){if(!n)throw new Error(t.missingParser);return n(e,i||r)},isParsed:function(t){return!("string"==typeof t)}}}}(Lr,u,Hr),yi=function(t,e,n,r,i){return function(t,o,a){var s,u,c=t.template;s=new i(t.parseOptions),s.isParsed(c)?u=c:("#"===c.charAt(0)&&(c=s.fromId(c)),u=s.parse(c)),r(u)&&(n(t.partials,u.partials),u=u.main),u&&1===u.length&&"string"==typeof u[0]&&(u=u[0]),t.template=u,e(t.partials,a.partials)}}(u,di,vr,te,mi),wi=function(t,e,n,r,i,o,a,s){function u(t,r){var i;return{"default":{getArg:function(){},extend:function(t,r){return n(e(t),r)},initialValue:function(e){return t[e]}},template:{getArg:function(){return i||(i=new s(t.parseOptions)),i},extend:function(t,e){return e},initialValue:function(t){return r[t]}}}}function c(e,n,s,c){function h(t){return!c.updatesOnly&&e[t]||c.updatesOnly&&m.indexOf(t)>-1}function f(){return d("data"),e.data||(e.data={}),v.filter(function(t){return"data"!==t}).filter(d)}function d(t){var r=c.newValues[t]||s[t],i=e.constructor[t]||n[t],o="data"===t?r:e.data,a=y[t]||y["default"],u=a.initialValue(t);return e[t]="function"==typeof r?r(o,s,a.getArg()):i?"function"==typeof i?i(o,s,a.getArg())||s[t]:a.extend(i,r):r?r:void 0,l(e[t],u)}function l(t,e){return t||e?p(t)&&p(e)?!1:g(t)&&g(e)?!1:t!==e:!1}function p(t){return i(t)&&!Object.keys(t).length}function g(t){return r(t)&&!t.length}var v,m,y=u(e,s);return c=c||{},c.newValues=c.newValues||{},v=c.registries?c.registries.filter(function(e){return t.indexOf(e)>-1}):t,m=f(),h("computed")&&o(e,e.computed),h("template")&&a(e,n,s),m}return t=t.concat(["template"]),c}(fi,Fe,di,L,te,vi,yi,mi),bi=function(t,e){return function(n,r){var i,o;return n.transitionsEnabled=r.noIntro?!1:r.transitionsEnabled,t&&!n.el?n.el=document.createDocumentFragment():n.el&&!r.append&&(n.el.innerHTML=""),i=new e(function(t){o=t}),n.render(n.el,n.anchor,o),r.complete&&(i=i.then(r.complete.bind(n))),n.transitionsEnabled=r.transitionsEnabled,i}}(u,g),xi=function(t,e,n,r,i,o){var a=["template","partials","components","decorators","events"].join();return function(s,u){var c,h,f,d,l,p;if("function"!=typeof s||u?s=s||{}:(u=s,s={}),"object"!=typeof s)throw new Error("The reset method takes either no arguments, or an object containing new data");for((f=this._wrapped[""])&&f.reset?f.reset(s)===!1&&(this.data=s):this.data=s,this.initOptions.data=this.data,d=i(this,this.constructor.defaults,this.initOptions,{updatesOnly:!0}),p=d.length;p--;)if(a.indexOf(d[p]>-1)){l=!0;break}return l?(this.teardown(),this._initing=!0,c=o(this,this.initOptions),this._initing=!1):(c=new t(function(t){h=t}),e.start(this,h),n(this,""),r(this,""),e.end(),this.fire("reset",s)),u&&c.then(u),c}}(g,R,D,A,wi,bi),_i=function(t,e,n){return function(r,i){var o,a,s={updatesOnly:!0,registries:["template","partials"]};return"function"!=typeof r||i||(i=r,r=void 0),r&&(s.newValues={template:r}),a=e(this,this.constructor.defaults,this.initOptions,s),a.length?(this.teardown(),this._initing=!0,o=n(this,this.initOptions),this._initing=!1):o=t.resolve(),i&&o.then(i),o}}(g,wi,bi),Ei=function(t,e,n,r,i){return function(o,a,s){var u,c,h;if(c=new r(function(t){h=t}),t.start(this,h),e(o)){u=o,s=a;for(o in u)u.hasOwnProperty(o)&&(a=u[o],o=n(o),i(this,o,a))}else o=n(o),i(this,o,a);return t.end(),s&&c.then(s.bind(this)),c}}(R,te,v,g,U),ki=function(t){return function(e,n){return t(this,e,void 0===n?-1:-n)}}(d),Ni=function(t,e,n,r,i){return function(o){var a,s,u,c,h,f,d,l;if(this.fire("teardown"),c=!this.component||this.component.shouldDestroy,this.constructor.css)if(c)h=o,o=function(){h&&h.call(this),e.remove(this.constructor)};else{f=this.component.parentFragment;do f.owner.type===t.ELEMENT&&f.owner.willDetach&&(d=f.owner);while(!d&&(f=f.parent));if(!d)throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!");d.cssDetachQueue.push(this.constructor)}for(s=new r(function(t){u=t}),n.start(this,u),this.fragment.teardown(c);this._animations[0];)this._animations[0].stop();for(a in this._cache)i(this,a);for(;l=this._unresolvedImplicitDependencies.pop();)l.teardown();return n.end(),o&&s.then(o.bind(this)),s}}(j,_,R,g,D),Oi=function(){return this.fragment.toString()},Ti=function(t,e){var n;{if("string"==typeof t)return n=this.get(t),this.set(t,!n,e);if(this.debug)throw new Error("Bad arguments")}},Ai=function(t,e,n,r){return function(i,o){var a,s;return"function"==typeof i?(o=i,i=""):i=i||"",a=new e(function(t){s=t}),t.start(this,s),n(this,i),r(this,i),t.end(),this.fire("update",i),o&&a.then(o.bind(this)),a}}(R,g,D,A),Si=function(t,e,n){function r(t,i,o,a,s){var u,c,h,f,d,l;if(u=t._twowayBindings[i])for(h=u.length;h--;)f=u[h],(!f.radioName||f.node.checked)&&(f.checkboxName?f.changed()&&a[i]!==!0&&(a[i]=!0,a.push(i)):(d=f.attr.value,l=f.value(),e(d,l)||n(d,l)||(o[i]=l)));if(s&&(c=t._depsMap[i]))for(h=c.length;h--;)r(t,c[h],o,a,s)}return function(e,n){var i,o,a;if("string"!=typeof e&&(e="",n=!0),r(this,e,i={},o=[],n),a=o.length)for(;a--;)e=o[a],i[e]=t(this,e);this.set(i)}}(E,yn,p),Ri=function(t,e,n,r,i,o,a,s,u,c,h,f,d,l,p,g,v,m,y,w,b,x,_,E,k){return{add:t,animate:e,detach:n,find:r,findAll:i,findAllComponents:o,findComponent:a,fire:s,get:u,insert:c,merge:h,observe:f,off:d,on:l,render:p,renderHTML:g,reset:v,resetTemplate:m,set:y,subtract:w,teardown:b,toHTML:x,toggle:_,update:E,updateModel:k}}(l,ie,oe,ae,ve,me,ye,we,xe,Ee,Oe,Ce,Le,Ie,ci,hi,xi,_i,Ei,ki,Ni,Oi,Ti,Ai,Si),Ci={},Li={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},Ii=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"==t?e:3&e|8,n.toString(16)})},Fi=function(){function t(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function e(t){return t.str}var n=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,r=/\/\*.*?\*\//g,i=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g;return function(o,a){var s,u;return u=function(t){var n,r,o,s,u,c,h,f,d=[];for(n=[];r=i.exec(t);)n.push({str:r[0],base:r[1],modifiers:r[2]});for(s='[data-rvcguid="'+a+'"]',u=n.map(e),f=n.length;f--;)h=u.slice(),o=n[f],h[f]=o.base+s+o.modifiers||"",c=u.slice(),c[f]=s+" "+c[f],d.push(h.join(" "),c.join(" "));return d.join(", ")},s=o.replace(r,"").replace(n,function(e,n){var r,i;return r=n.split(",").map(t),i=r.map(u).join(", ")+" ",e.replace(n,i)})}}(),Mi=function(t,e,n,r){return function(i,o){t.forEach(function(t){o[t]&&(i[t]=e(o[t]))}),n(i,"defaults",{value:e(o.defaults)}),o.css&&n(i,"css",{value:o.defaults.noCssTransform?o.css:r(o.css,i._guid)})}}(fi,Fe,c,Fi),Pi=function(t,e){return/_super/.test(t)?function(){var n,r=this._super;return this._super=e,n=t.apply(this,arguments),this._super=r,n}:t},ji=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},Di=function(t,e,n,r,i,o){var a={};return e.concat(t.keys).forEach(function(t){a[t]=!0}),function(s,u){var c,h;e.forEach(function(t){var e=u[t];e&&(s[t]?i(s[t],e):s[t]=e)}),t.keys.forEach(function(t){var e=u[t];void 0!==e&&(s.defaults[t]="function"==typeof e&&"function"==typeof s[t]?r(e,s[t]):u[t])});for(c in u)!a[c]&&u.hasOwnProperty(c)&&(h=u[c],s.prototype[c]="function"==typeof h&&"function"==typeof s.prototype[c]?r(h,s.prototype[c]):h);u.css&&n(s,"css",{value:s.defaults.noCssTransform?u.css:o(u.css,s._guid)})}}(i,fi,c,Pi,ji,Fi),$i=function(t,e){return function(n,r){t(n.defaults.template)&&(n.partials||(n.partials={}),e(n.partials,n.defaults.template.partials),r.partials&&e(n.partials,r.partials),n.defaults.template=n.defaults.template.main)}}(te,ji),Ui=function(t,e,n){return function(r){var i;if("string"==typeof r.defaults.template){if(!n)throw new Error(t.missingParser);if("#"===r.defaults.template.charAt(0)&&e){if(i=document.getElementById(r.defaults.template.substring(1)),!i||"SCRIPT"!==i.tagName)throw new Error("Could not find template element ("+r.defaults.template+")");r.defaults.template=n(i.innerHTML,r)}else r.defaults.template=n(r.defaults.template,r.defaults)}}}(Lr,u,Hr),Bi=function(t,e){return function(n){var r;if(n.partials)for(r in n.partials)if(n.partials.hasOwnProperty(r)&&"string"==typeof n.partials[r]){if(!e)throw new Error(t.missingParser);n.partials[r]=e(n.partials[r],n)}}}(Lr,Hr),Wi=function(t,e,n,r,i,o,a,s,u,c,h){function f(e,n,r){d(n),d(r),t.keys.forEach(function(t){void 0===r[t]&&(r[t]=n[t])}),g.forEach(function(t){e[t]=r[t]}),"string"==typeof e.adapt&&(e.adapt=[e.adapt]),l(e,r)}function d(t){a(t.adaptors)&&(e("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`. See [TODO] for more information"),t.adapt=t.adaptors,delete t.adaptors),t.eventDefinitions&&(e("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),t.events=t.eventDefinitions)}function l(t,e){var n;if(t.magic&&!u)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(e.el){if(t.el=o(e.el),!t.el&&t.debug)throw new Error("Could not find container element");(n=o(e.append))&&(t.anchor=n)}}function p(t,e){i(t,{_initing:{value:!0,writable:!0},_guid:{value:s()},_subs:{value:n(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:n(null)},_deps:{value:[]},_depsMap:{value:n(null)},_patternObservers:{value:[]},_evaluators:{value:n(null)},_computations:{value:n(null)},_twowayBindings:{value:{}},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:n(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},_changes:{value:[]},_unresolvedImplicitDependencies:{value:[]}}),t.parseOptions={preserveWhitespace:e.preserveWhitespace,sanitize:e.sanitize,stripComments:e.stripComments,delimiters:e.delimiters,tripleDelimiters:e.tripleDelimiters},e._parent&&e._component&&(i(t,{_parent:{value:e._parent},component:{value:e._component}}),e._component.instance=t)}var g=["adapt","modifyArrays","magic","twoway","lazy","debug","isolated"];return function(t,e){var n=t.constructor.defaults;t.initOptions=e=e||{},f(t,n,e),p(t,e),c(t,n,e),h(t,e),t._initing=!1}}(i,X,Fe,di,h,_e,L,Ii,q,wi,bi),Vi=function(t,e,n){return function(r,i,o){t.keys.forEach(function(t){var n=o[t],r=i.defaults[t];"function"==typeof n&&"function"==typeof r&&(o[t]=e(n,r))}),r.beforeInit&&r.beforeInit(o),n(r,o),o._parent&&o._parent._rendering?o._parent._childInitQueue.push({instance:r,options:o}):r.init&&r.init(o)}}(i,Pi,Wi),qi=function(t,e,n,r,i,o,a,s,u,c,h){var f;return h.push(function(){f=h.Ractive}),function d(h){var l,p,g,v=this;if(h.prototype instanceof f&&(h=r({},h,h.prototype,h.defaults)),l=function(t){c(this,l,t||{})},l.prototype=t(v.prototype),l.prototype.constructor=l,l.extend=d,e(l,"_guid",{value:n()}),i(l,v),o(l,h),l.adaptors&&(g=l.defaults.adapt.length))for(;g--;)p=l.defaults.adapt[g],"string"==typeof p&&(l.defaults.adapt[g]=l.adaptors[p]||p);return h.template&&(s(l),a(l,h),u(l)),l}}(Fe,c,Ii,di,Mi,Di,$i,Ui,Bi,Vi,b),zi=function(t,e,n,r,i,o,a,s,u,c,h,f,d,l){var p=function(t){d(this,t)};return p.prototype=r,n(p,{partials:{value:i},adaptors:{value:o},easing:{value:s},transitions:{value:{}},events:{value:{}},components:{value:a},decorators:{value:{}},interpolators:{value:u},defaults:{value:t.defaults},svg:{value:e},VERSION:{value:"0.4.0"}}),p.eventDefinitions=p.events,p.prototype.constructor=p,p.Promise=c,p.extend=h,p.parse=f,l.Ractive=p,p}(i,o,h,Ri,Ir,F,Ci,Li,ee,g,qi,Hr,Wi,b),Gi=function(t,e){for(var n="function";e.length;)e.pop()();if(typeof Date.now!==n||typeof String.prototype.trim!==n||typeof Object.keys!==n||typeof Array.prototype.indexOf!==n||typeof Array.prototype.forEach!==n||typeof Array.prototype.map!==n||typeof Array.prototype.filter!==n||"undefined"!=typeof window&&typeof window.addEventListener!==n)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return"undefined"!=typeof window&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains),t}(zi,b,r);"undefined"!=typeof e&&e.exports?e.exports=Gi:"function"==typeof define&&define.amd&&define(function(){return Gi}),t.Ractive=Gi,Gi.noConflict=function(){return t.Ractive=n,Gi}}("undefined"!=typeof window?window:this)},{}]},{},[1]);